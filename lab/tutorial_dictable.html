
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyg.base.dictable &#8212; pyg 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pyg.mongo" href="tutorial_mongo.html" />
    <link rel="prev" title="pyg.base.Dict" href="tutorial_dict.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="pyg.base.dictable">
<h1>pyg.base.dictable<a class="headerlink" href="#pyg.base.dictable" title="Permalink to this headline">¶</a></h1>
<p>dictable is a table, a collection of iterable records. It is also a dict with each key’s value being a column. Why not use a pandas.DataFrame? pd.DataFrame leads a dual life:</p>
<ul class="simple">
<li><p>by day an index-based optimized numpy array supporting e.g. timeseries analytics etc.</p></li>
<li><p>by night, a table with keys supporting filtering, aggregating, pivoting on keys as well as inner/outer joining on keys.</p></li>
</ul>
<p>As a result, the pandas interface is somewhat cumbersome. Further, the DataFrame isn’t really designed for containing more complicated objects within it. Conversely, dictable only tries to do the latter and is designed precisely for holding entire research process in one place. You can think of dictable as ‘one level up’ on a DataFrame: a dictable will handle thousands of data frames within it with ease. Indeed, dictable should be thought of as an ‘organiser of research flow’ rather than as an
array of primitives. In general, each row will contain some keys indexing the experiment, while some keys will contain complicated objects: a pd.DataFrame, a timeseries, yield_curves, machine-learning experiments etc. The interface is succinct and extremely intuitive, allowing the user to concentrate on logic of the calculations rather than boilerplate.</p>
<div class="section" id="Motivation:-dictable-as-an-organiser-of-research-flow">
<h2>Motivation: dictable as an organiser of research flow<a class="headerlink" href="#Motivation:-dictable-as-an-organiser-of-research-flow" title="Permalink to this headline">¶</a></h2>
<p>We start with a simple motivating example. Here is a typical workflow:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;WMT&#39;</span><span class="p">,</span> <span class="s1">&#39;TSLA&#39;</span><span class="p">,</span> <span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;BAD_SYMBOL&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]</span>
<span class="n">history</span> <span class="o">=</span> <span class="p">[</span><span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="n">h</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">history</span><span class="p">]</span>
<span class="n">rtns</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prices</span><span class="p">]</span>
<span class="n">vols</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rtns</span><span class="p">]</span>
<span class="n">zscores</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">/</span><span class="n">v</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rtns</span><span class="p">,</span> <span class="n">vols</span><span class="p">)]</span>
<span class="n">zavgs</span> <span class="o">=</span> <span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">zscores</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed

1 Failed download:
- BAD_SYMBOL: No data found, symbol may be delisted
[*********************100%***********************]  1 of 1 completed
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">zavgs</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.06238896915574035,
 0.045634555332148996,
 0.0676156301672513,
 0.053189575669227614,
 nan,
 0.027297252361386543]
</pre></div></div>
</div>
<p>At this point we ask ourselves: Why do we have a <strong>nan</strong>? Which ticker was it, and when did it go wrong?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">bad_symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">zavgs</span><span class="p">)</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">z</span><span class="p">)];</span> <span class="n">bad_symbols</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;BAD_SYMBOL&#39;]
</pre></div></div>
</div>
<p>Great, how do we remove bad symbols from all our other variables?</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">vols</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">vols</span><span class="p">)</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bad_symbols</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Now we can calculate some stuff with rtns and vols perhaps?</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ewmas</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">/</span><span class="n">v</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rtns</span><span class="p">,</span> <span class="n">vols</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<p>Things went wrong and went wrong silently too:</p>
<ul class="simple">
<li><p>We forgot to remove bad data from rtns as well as from vols so our zip function is zipping the wrong stocks together</p></li>
<li><p>It is nearly impossible to discover what item in the list belong to what n and what stock</p></li>
</ul>
<p>If you ever dealt with real data, the mess described above must be familiar.</p>
</div>
<div class="section" id="Same-code,-in-dictable">
<h2>Same code, in dictable<a class="headerlink" href="#Same-code,-in-dictable" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">symbol</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;WMT&#39;</span><span class="p">,</span> <span class="s1">&#39;TSLA&#39;</span><span class="p">,</span> <span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;BAD_SYMBOL&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">history</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">symbol</span><span class="p">:</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">symbol</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">price</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">history</span><span class="p">:</span> <span class="n">history</span><span class="p">[</span><span class="s1">&#39;Adj Close&#39;</span><span class="p">])</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">rtn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">price</span><span class="p">:</span> <span class="n">price</span><span class="o">.</span><span class="n">diff</span><span class="p">())</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">vol</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">rtn</span><span class="p">:</span> <span class="n">rtn</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">zscore</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">rtn</span><span class="p">,</span> <span class="n">vol</span><span class="p">:</span> <span class="n">rtn</span><span class="o">/</span><span class="n">vol</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">(</span><span class="n">zavg</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">zscore</span><span class="p">:</span> <span class="n">zscore</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed
[*********************100%***********************]  1 of 1 completed

1 Failed download:
- BAD_SYMBOL: No data found, symbol may be delisted
[*********************100%***********************]  1 of 1 completed
</pre></div></div>
</div>
<p>dictable <strong>s</strong> contains all our data.</p>
<ul class="simple">
<li><p>each row contains all the variables associated with a specific symbol</p></li>
<li><p>each column corresponds to a variable</p></li>
<li><p>adding a new variable is declarative and free of boiler-plate loop and zip</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">s</span><span class="p">[[</span><span class="s1">&#39;symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;history&#39;</span><span class="p">,</span> <span class="s1">&#39;vol&#39;</span><span class="p">,</span> <span class="s1">&#39;zavg&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[6 x 4]
symbol    |history                                           |vol                                        |zavg
MSFT      |                  Open        High         Low    |Date                                       |0.06238896915574035
          |Date                                              |1986-03-13         NaN                     |
          |1986-03-13    0.088542    0.101563    0.088542    |1986-03-14         NaN                     |
          |1986-03-14    0.097222    0.102431    0.097222    |1986-03-17    0.000779                     |
          |1986-03-17    0.100694    0.103299    0.100694    |1986-03-18    0.001997                     |
WMT       |                  Open        High         Low    |Date                                       |0.045634555332148996
          |Date                                              |1972-08-25         NaN                     |
          |1972-08-25    0.063477    0.064697    0.063477    |1972-08-28         NaN                     |
          |1972-08-28    0.064453    0.064941    0.064209    |1972-08-29    0.000198                     |
          |1972-08-29    0.063965    0.063965    0.063477    |1972-08-30    0.000215                     |
TSLA      |                  Open        High         Low    |Date                                       |0.0676156301672513
          |Date                                              |2010-06-29          NaN                    |
          |2010-06-29    3.800000    5.000000    3.508000    |2010-06-30          NaN                    |
          |2010-06-30    5.158000    6.084000    4.660000    |2010-07-01     0.255972                    |
          |2010-07-01    5.000000    5.184000    4.054000    |2010-07-02     0.274164                    |
AAPL      |                  Open        High         Low    |Date                                       |0.053189575669227614
          |Date                                              |1980-12-12         NaN                     |
          |1980-12-12    0.128348    0.128906    0.128348    |1980-12-15         NaN                     |
          |1980-12-15    0.122210    0.122210    0.121652    |1980-12-16    0.001242                     |
          |1980-12-16    0.113281    0.113281    0.112723    |1980-12-17    0.004938                     |
BAD_SYMBOL|Empty DataFrame                                   |Series([], Name: Adj Close, dtype: float64)|nan
          |Columns: [Open, High, Low, Close, Adj Close, Volum|                                           |
          |Index: []                                         |                                           |
C         |                 Open       High        Low      C|Date                                       |0.027297252361386543
          |Date                                              |1977-01-03         NaN                     |
          |1977-01-03  16.133125  16.236876  16.133125  16.23|1977-01-04         NaN                     |
          |1977-01-04  16.236876  16.288750  16.184999  16.28|1977-01-05    0.053720                     |
          |1977-01-05  16.288750  16.288750  16.133125  16.18|1977-01-06    0.043500                     |
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">s</span><span class="o">.</span><span class="n">zavg</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.06238896915574035,
 0.045634555332148996,
 0.0676156301672513,
 0.053189575669227614,
 nan,
 0.027297252361386543]
</pre></div></div>
</div>
<div class="section" id="Oh,-no,-we-have-a-bad-symbol,-how-do-we-remove-it?">
<h3>Oh, no, we have a bad symbol, how do we remove it?<a class="headerlink" href="#Oh,-no,-we-have-a-bad-symbol,-how-do-we-remove-it?" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">zavg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">);</span> <span class="n">s</span><span class="o">.</span><span class="n">zavg</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[0.06238896915574035,
 0.045634555332148996,
 0.0676156301672513,
 0.053189575669227614,
 0.027297252361386543]
</pre></div></div>
</div>
</div>
<div class="section" id="Now-if-we-want-to-calculate-something-per-symbol-and-window…">
<h3>Now if we want to calculate something per symbol and window…<a class="headerlink" href="#Now-if-we-want-to-calculate-something-per-symbol-and-window…" title="Permalink to this headline">¶</a></h3>
<p>We want to create a new table, now keyed on two values: symbol and window n, so we create a bigger table using cross product:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sn</span> <span class="o">=</span> <span class="n">s</span> <span class="o">*</span> <span class="nb">dict</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">])</span> <span class="c1">## each row is now unique per symbol and window n</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sn</span> <span class="o">=</span> <span class="n">sn</span><span class="p">(</span><span class="n">ewma</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">rtn</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">vol</span><span class="p">:</span> <span class="n">rtn</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">/</span><span class="n">vol</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>And here is Citibank’s three ewma…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sn</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">symbol</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span><span class="p">)[[</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;ewma&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 2]
n |ewma
10|Date
  |1977-01-03         NaN
  |1977-01-04         NaN
  |1977-01-05   -0.269415
  |1977-01-06   -0.636750
20|Date
  |1977-01-03         NaN
  |1977-01-04         NaN
  |1977-01-05   -0.252990
  |1977-01-06   -0.610388
30|Date
  |1977-01-03         NaN
  |1977-01-04         NaN
  |1977-01-05   -0.247336
  |1977-01-06   -0.601208
</pre></div></div>
</div>
<p>Here is a pivot table of the average of each ewma per symbol and window… Note that again, we can access functions of variables and not just the existing keys in the dictable</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sn</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">ewma</span><span class="p">:</span> <span class="n">ewma</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[5 x 4]
symbol|10                    |20                    |30
AAPL  |[0.05186739363086048] |[0.048216725636102103]|[0.044663941035992756]
C     |[0.027514106874753336]|[0.026447710541888325]|[0.02513228496004374]
MSFT  |[0.061144190254947106]|[0.058806269926441355]|[0.056647557919386575]
TSLA  |[0.05809192519536144] |[0.0513719449570986]  |[0.0461212842741293]
WMT   |[0.04534668336293025] |[0.04406462686679985] |[0.0426962176790935]
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="dictable-functionality">
<h2>dictable functionality<a class="headerlink" href="#dictable-functionality" title="Permalink to this headline">¶</a></h2>
<div class="section" id="construction">
<h3>construction<a class="headerlink" href="#construction" title="Permalink to this headline">¶</a></h3>
<p>dictable is quite flexible on constuctions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]);</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 2]
a|b
1|a
2|b
3|c
4|d
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]),</span> <span class="n">symbol</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;APA&#39;</span><span class="p">,</span> <span class="s1">&#39;MMM&#39;</span><span class="p">],</span> <span class="n">exchange</span> <span class="o">=</span> <span class="s1">&#39;NYSE&#39;</span><span class="p">);</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 4]
symbol|exchange|a|b
MSFT  |NYSE    |1|a
AAPL  |NYSE    |2|b
APA   |NYSE    |3|c
MMM   |NYSE    |4|d
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="c1"># can instantiate a DataFrame from a dictable with no code and vice versa...</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">df</span><span class="p">);</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 4]
symbol|exchange|a|b
MSFT  |NYSE    |1|a
AAPL  |NYSE    |2|b
APA   |NYSE    |3|c
MMM   |NYSE    |4|d
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]);</span> <span class="n">d</span> <span class="c1"># construction from records as tuples</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 2]
a|b
1|3
2|4
3|5
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">([</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;new column&#39;</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;also here&#39;</span><span class="p">)]);</span> <span class="n">d</span> <span class="c1"># construction from records as dicts, mismatching on keys is fine</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
b|c        |a|d
3|None     |1|None
4|None     |2|new column
5|also here|3|None
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;d:/dropbox/yoav/python/pyg/docs/constituents_csv.csv&#39;</span><span class="p">));</span> <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">[:</span><span class="mi">6</span><span class="p">];</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[6 x 3]
Symbol|Name               |Sector
MMM   |3M Company         |Industrials
AOS   |A.O. Smith Corp    |Industrials
ABT   |Abbott Laboratories|Health Care
ABBV  |AbbVie Inc.        |Health Care
ABMD  |ABIOMED Inc        |Health Care
ACN   |Accenture plc      |Information Technology
</pre></div></div>
</div>
</div>
<div class="section" id="row-access">
<h3>row access<a class="headerlink" href="#row-access" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">#returns a record</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;Symbol&#39;: &#39;MMM&#39;, &#39;Name&#39;: &#39;3M Company&#39;, &#39;Sector&#39;: &#39;Industrials&#39;}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="c1">## subset rows using slice</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 3]
Symbol|Name           |Sector
MMM   |3M Company     |Industrials
AOS   |A.O. Smith Corp|Industrials
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span> <span class="c1"># iteration is by row</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;Symbol&#39;: &#39;MMM&#39;, &#39;Name&#39;: &#39;3M Company&#39;, &#39;Sector&#39;: &#39;Industrials&#39;}
{&#39;Symbol&#39;: &#39;AOS&#39;, &#39;Name&#39;: &#39;A.O. Smith Corp&#39;, &#39;Sector&#39;: &#39;Industrials&#39;}
{&#39;Symbol&#39;: &#39;ABT&#39;, &#39;Name&#39;: &#39;Abbott Laboratories&#39;, &#39;Sector&#39;: &#39;Health Care&#39;}
{&#39;Symbol&#39;: &#39;ABBV&#39;, &#39;Name&#39;: &#39;AbbVie Inc.&#39;, &#39;Sector&#39;: &#39;Health Care&#39;}
{&#39;Symbol&#39;: &#39;ABMD&#39;, &#39;Name&#39;: &#39;ABIOMED Inc&#39;, &#39;Sector&#39;: &#39;Health Care&#39;}
{&#39;Symbol&#39;: &#39;ACN&#39;, &#39;Name&#39;: &#39;Accenture plc&#39;, &#39;Sector&#39;: &#39;Information Technology&#39;}
</pre></div></div>
</div>
</div>
<div class="section" id="column-access">
<h3>column access<a class="headerlink" href="#column-access" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">Name</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;3M Company&#39;,
 &#39;A.O. Smith Corp&#39;,
 &#39;Abbott Laboratories&#39;,
 &#39;AbbVie Inc.&#39;,
 &#39;ABIOMED Inc&#39;,
 &#39;Accenture plc&#39;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;3M Company&#39;,
 &#39;A.O. Smith Corp&#39;,
 &#39;Abbott Laboratories&#39;,
 &#39;AbbVie Inc.&#39;,
 &#39;ABIOMED Inc&#39;,
 &#39;Accenture plc&#39;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sector&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[(&#39;3M Company&#39;, &#39;Industrials&#39;),
 (&#39;A.O. Smith Corp&#39;, &#39;Industrials&#39;),
 (&#39;Abbott Laboratories&#39;, &#39;Health Care&#39;),
 (&#39;AbbVie Inc.&#39;, &#39;Health Care&#39;),
 (&#39;ABIOMED Inc&#39;, &#39;Health Care&#39;),
 (&#39;Accenture plc&#39;, &#39;Information Technology&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sector&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[6 x 2]
Name               |Sector
3M Company         |Industrials
A.O. Smith Corp    |Industrials
Abbott Laboratories|Health Care
AbbVie Inc.        |Health Care
ABIOMED Inc        |Health Care
Accenture plc      |Information Technology
</pre></div></div>
</div>
</div>
<div class="section" id="d-is-a-dict-so-supports-the-usual-keys(),-values()-and-items():">
<h3>d is a dict so supports the usual keys(), values() and items():<a class="headerlink" href="#d-is-a-dict-so-supports-the-usual-keys(),-values()-and-items():" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Symbol : [&#39;MMM&#39;, &#39;AOS&#39;, &#39;ABT&#39;, &#39;ABBV&#39;, &#39;ABMD&#39;, &#39;ACN&#39;]
Name : [&#39;3M Company&#39;, &#39;A.O. Smith Corp&#39;, &#39;Abbott Laboratories&#39;, &#39;AbbVie Inc.&#39;, &#39;ABIOMED Inc&#39;, &#39;Accenture plc&#39;]
Sector : [&#39;Industrials&#39;, &#39;Industrials&#39;, &#39;Health Care&#39;, &#39;Health Care&#39;, &#39;Health Care&#39;, &#39;Information Technology&#39;]
</pre></div></div>
</div>
<p>access via <strong>function</strong> of variables is also supported</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">Symbol</span><span class="p">,</span> <span class="n">Sector</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">Symbol</span><span class="p">,</span> <span class="n">Sector</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;MMM, Industrials&#39;,
 &#39;AOS, Industrials&#39;,
 &#39;ABT, Health Care&#39;,
 &#39;ABBV, Health Care&#39;,
 &#39;ABMD, Health Care&#39;,
 &#39;ACN, Information Technology&#39;]
</pre></div></div>
</div>
</div>
<div class="section" id="column-and-row-access-are-commutative">
<h3>column and row access are commutative<a class="headerlink" href="#column-and-row-access-are-commutative" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Name</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">Name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;3M Company&#39;</span>
<span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="k">lambda</span> <span class="n">Symbol</span><span class="p">,</span> <span class="n">Sector</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">Symbol</span><span class="p">,</span> <span class="n">Sector</span><span class="p">)]</span> <span class="o">==</span> <span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">Symbol</span><span class="p">,</span> <span class="n">Sector</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">Symbol</span><span class="p">,</span> <span class="n">Sector</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;MMM, Industrials&#39;</span>
<span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">d</span><span class="p">[:</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sector&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sector&#39;</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">d</span><span class="p">[:</span><span class="mi">2</span><span class="p">][[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sector&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="n">d</span><span class="p">[[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sector&#39;</span><span class="p">]][:</span><span class="mi">2</span><span class="p">]</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="adding-records">
<h3>adding records<a class="headerlink" href="#adding-records" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;abramson&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;donaldson&#39;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="c1">## adding a single record</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 3]
age|name   |surname
1  |alan   |abramson
2  |barbara|brown
3  |chris  |cohen
4  |david  |donaldson
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">+</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;donaldson&#39;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">4</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;evan&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;emmerson&#39;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[5 x 3]
age|name   |surname
1  |alan   |abramson
2  |barbara|brown
3  |chris  |cohen
4  |david  |donaldson
5  |evan   |emmerson
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;evan&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;donaldson&#39;</span><span class="p">,</span> <span class="s1">&#39;emmerson&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[5 x 3]
age|name   |surname
1  |alan   |abramson
2  |barbara|brown
3  |chris  |cohen
4  |david  |donaldson
5  |evan   |emmerson
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;evan&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;donaldson&#39;</span><span class="p">,</span> <span class="s1">&#39;emmerson&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[5 x 3]
age|name   |surname
1  |alan   |abramson
2  |barbara|brown
3  |chris  |cohen
4  |david  |donaldson
5  |evan   |emmerson
</pre></div></div>
</div>
</div>
<div class="section" id="adding/modifying-columns">
<h3>adding/modifying columns<a class="headerlink" href="#adding/modifying-columns" title="Permalink to this headline">¶</a></h3>
<p>You can add a column or a constant by simply calling the dictable with the values:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">(</span><span class="n">gender</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">])(</span><span class="n">school</span> <span class="o">=</span> <span class="s1">&#39;St Paul&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 5]
name   |surname |age|gender|school
alan   |abramson|1  |m     |St Paul
barbara|brown   |2  |f     |St Paul
chris  |cohen   |3  |m     |St Paul
</pre></div></div>
</div>
<p>More interestingly, it can be a callable function using the other variables…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="n">initials</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">surname</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
name   |surname |age|initials
alan   |abramson|1  |aa
barbara|brown   |2  |bb
chris  |cohen   |3  |cc
</pre></div></div>
</div>
<p>Given d is a dict, a more traditional way of setting a new key is by simple assignment:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;initials&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">surname</span><span class="p">[</span><span class="mi">0</span><span class="p">]];</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
name   |surname |age|initials
alan   |abramson|1  |aa
barbara|brown   |2  |bb
chris  |cohen   |3  |cc
</pre></div></div>
</div>
<p>Or you can use the dict.update method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">gender</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">]));</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 5]
name   |surname |age|initials|gender
alan   |abramson|1  |aa      |m
barbara|brown   |2  |bb      |f
chris  |cohen   |3  |cc      |m
</pre></div></div>
</div>
</div>
<div class="section" id="do">
<h3>do<a class="headerlink" href="#do" title="Permalink to this headline">¶</a></h3>
<p>Sometime we want to apply the same function(s) to a collection of columns. For this, ‘do’ will do nicely:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">upper</span><span class="p">,</span> <span class="s1">&#39;initials&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">proper</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">);</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 5]
name   |surname |age|initials|gender
Alan   |Abramson|1  |AA      |M
Barbara|Brown   |2  |BB      |F
Chris  |Cohen   |3  |CC      |M
</pre></div></div>
</div>
</div>
<div class="section" id="removing-columns">
<h3>removing columns<a class="headerlink" href="#removing-columns" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;initials&#39;</span><span class="p">;</span> <span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
name   |surname |age|gender
Alan   |Abramson|1  |M
Barbara|Brown   |2  |F
Chris  |Cohen   |3  |M
</pre></div></div>
</div>
</div>
<div class="section" id="removing-rows">
<h3>removing rows<a class="headerlink" href="#removing-rows" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Alan&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 4]
age|gender|name   |surname
2  |F     |Barbara|Brown
3  |M     |Chris  |Cohen
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Alan&#39;</span><span class="p">,</span> <span class="s1">&#39;Chris&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 4]
age|gender|name |surname
1  |M     |Alan |Abramson
3  |M     |Chris|Cohen
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 4]
age|gender|name   |surname
2  |F     |Barbara|Brown
3  |M     |Chris  |Cohen
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">gender</span><span class="p">:</span> <span class="n">gender</span> <span class="o">==</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[1 x 4]
name   |surname|age|gender
Barbara|Brown  |2  |F
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">surname</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 4]
age|gender|name |surname
1  |M     |Alan |Abramson
3  |M     |Chris|Cohen
</pre></div></div>
</div>
</div>
<div class="section" id="sort">
<h3>sort<a class="headerlink" href="#sort" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
name   |surname |age|gender
Alan   |Abramson|1  |M
Barbara|Brown   |2  |F
Chris  |Cohen   |3  |M
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># can sort on functions of variables too</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
name   |surname |age|gender
Barbara|Brown   |2  |F
Alan   |Abramson|1  |M
Chris  |Cohen   |3  |M
</pre></div></div>
</div>
</div>
<div class="section" id="listby(keys)">
<h3>listby(keys)<a class="headerlink" href="#listby(keys)" title="Permalink to this headline">¶</a></h3>
<p>listby is like groupby except it returns a dictable with unique keys and the other columns are returned as a list. We find that MUCH more useful usually than groupby</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">],</span> <span class="n">grades</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">80</span><span class="p">],</span> <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;english&#39;</span><span class="p">,</span> <span class="n">teacher</span> <span class="o">=</span> <span class="s1">&#39;mr bennet&#39;</span><span class="p">)</span> \
       <span class="o">+</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;esther&#39;</span><span class="p">],</span> <span class="n">grades</span> <span class="o">=</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">70</span><span class="p">],</span> <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;math&#39;</span><span class="p">,</span> <span class="n">teacher</span> <span class="o">=</span> <span class="s1">&#39;mrs ruler&#39;</span><span class="p">)</span> \
       <span class="o">+</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">,</span> <span class="s1">&#39;esther&#39;</span><span class="p">],</span> <span class="n">grades</span> <span class="o">=</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">80</span><span class="p">],</span> <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;french&#39;</span><span class="p">,</span> <span class="n">teacher</span> <span class="o">=</span> <span class="s1">&#39;dr francois&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;teacher&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 4]
teacher    |grades      |name                          |subject
dr francois|[90, 60, 80]|[&#39;barbara&#39;, &#39;chris&#39;, &#39;esther&#39;]|[&#39;french&#39;, &#39;french&#39;, &#39;french&#39;]
mr bennet  |[30, 90, 80]|[&#39;alan&#39;, &#39;barbara&#39;, &#39;chris&#39;]  |[&#39;english&#39;, &#39;english&#39;, &#39;english&#39;]
mrs ruler  |[40, 50, 70]|[&#39;alan&#39;, &#39;david&#39;, &#39;esther&#39;]   |[&#39;math&#39;, &#39;math&#39;, &#39;math&#39;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;teacher&#39;</span><span class="p">)(</span><span class="n">avg_grade</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">grades</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">grades</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[3 x 5]
teacher    |grades      |name                          |subject                          |avg_grade
dr francois|[90, 60, 80]|[&#39;barbara&#39;, &#39;chris&#39;, &#39;esther&#39;]|[&#39;french&#39;, &#39;french&#39;, &#39;french&#39;]   |76.66666666666667
mr bennet  |[30, 90, 80]|[&#39;alan&#39;, &#39;barbara&#39;, &#39;chris&#39;]  |[&#39;english&#39;, &#39;english&#39;, &#39;english&#39;]|66.66666666666667
mrs ruler  |[40, 50, 70]|[&#39;alan&#39;, &#39;david&#39;, &#39;esther&#39;]   |[&#39;math&#39;, &#39;math&#39;, &#39;math&#39;]         |53.333333333333336
</pre></div></div>
</div>
</div>
<div class="section" id="unlist">
<h3>unlist<a class="headerlink" href="#unlist" title="Permalink to this headline">¶</a></h3>
<p>unlist undoes listby() assuming it is possible…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;teacher&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[9 x 4]
grades|name   |subject|teacher
90    |barbara|french |dr francois
60    |chris  |french |dr francois
80    |esther |french |dr francois
...9 rows...
40    |alan   |math   |mrs ruler
50    |david  |math   |mrs ruler
70    |esther |math   |mrs ruler
</pre></div></div>
</div>
</div>
<div class="section" id="groupby(keys)-and-ungroup">
<h3>groupby(keys) and ungroup<a class="headerlink" href="#groupby(keys)-and-ungroup" title="Permalink to this headline">¶</a></h3>
<p>This is similar to DatFrame groupby except that instead of a new object, a dictable is returned: The name of the grouped column is given by ‘grp’. ungroup allows us to get back to original.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">classes</span> <span class="o">=</span> <span class="n">grades</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;teacher&#39;</span><span class="p">,</span> <span class="s1">&#39;subject&#39;</span><span class="p">],</span> <span class="n">grp</span> <span class="o">=</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">classes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;teacher&#39;: &#39;dr francois&#39;,
 &#39;subject&#39;: &#39;french&#39;,
 &#39;class&#39;: dictable[3 x 2]
 grades|name
 90    |barbara
 60    |chris
 80    |esther }
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">classes</span><span class="o">.</span><span class="n">ungroup</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[9 x 4]
grades|name   |subject|teacher
90    |barbara|french |dr francois
60    |chris  |french |dr francois
80    |esther |french |dr francois
...9 rows...
40    |alan   |math   |mrs ruler
50    |david  |math   |mrs ruler
70    |esther |math   |mrs ruler
</pre></div></div>
</div>
</div>
<div class="section" id="inner-join">
<h3>inner join<a class="headerlink" href="#inner-join" title="Permalink to this headline">¶</a></h3>
<p>The multiplication operation is overloaded for the join method. By default, if two dictables share keys, the join is an inner join on the keys</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">students</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">,</span> <span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;esthar&#39;</span><span class="p">,</span> <span class="s1">&#39;fabian&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;abramsom&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">,</span> <span class="s1">&#39;drummond&#39;</span><span class="p">,</span> <span class="s1">&#39;ecklestone&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shared keys:&#39;</span><span class="p">,</span> <span class="n">grades</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">students</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">grades</span> <span class="o">*</span> <span class="n">students</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
shared keys: [&#39;name&#39;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[7 x 5]
name   |grades|subject|teacher    |surname
alan   |30    |english|mr bennet  |abramsom
alan   |40    |math   |mrs ruler  |abramsom
barbara|90    |english|mr bennet  |brown
...7 rows...
chris  |80    |english|mr bennet  |cohen
chris  |60    |french |dr francois|cohen
david  |50    |math   |mrs ruler  |drummond
</pre></div></div>
</div>
<p>Are there students with no surname? We can do a xor or use division which is overloaded for xor:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span> <span class="o">/</span> <span class="n">students</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 4]
grades|name  |subject|teacher
70    |esther|math   |mrs ruler
80    |esther|french |dr francois
</pre></div></div>
</div>
<p>Are there students with no grades?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">students</span> <span class="o">/</span> <span class="n">grades</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[2 x 2]
name  |surname
esthar|ecklestone
fabian|fox
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">students</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Alan&#39;</span><span class="p">,</span> <span class="s1">&#39;Barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;Chris&#39;</span><span class="p">,</span> <span class="s1">&#39;David&#39;</span><span class="p">,</span> <span class="s1">&#39;Esther&#39;</span><span class="p">,</span> <span class="s1">&#39;Fabian&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;abramsom&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">,</span> <span class="s1">&#39;drummond&#39;</span><span class="p">,</span> <span class="s1">&#39;ecklestone&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>We fixed Esther’s spelling but introduced capitalization, that is OK, we are allowed to inner join on functions of keys too.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">students</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[9 x 5]
name   |grades|subject|teacher    |surname
alan   |30    |english|mr bennet  |abramsom
alan   |40    |math   |mrs ruler  |abramsom
barbara|90    |english|mr bennet  |brown
...9 rows...
david  |50    |math   |mrs ruler  |drummond
esther |70    |math   |mrs ruler  |ecklestone
esther |80    |french |dr francois|ecklestone
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">students</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">first_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">,</span> <span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;esther&#39;</span><span class="p">,</span> <span class="s1">&#39;fabian&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;abramsom&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">,</span> <span class="s1">&#39;drummond&#39;</span><span class="p">,</span> <span class="s1">&#39;ecklestone&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>You can inner join on different column names and both columns will be populated:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">grades</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">students</span><span class="p">),</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[9 x 6]
name   |grades|subject|teacher    |first_name|surname
alan   |30    |english|mr bennet  |alan      |abramsom
alan   |40    |math   |mrs ruler  |alan      |abramsom
barbara|90    |english|mr bennet  |barbara   |brown
...9 rows...
david  |50    |math   |mrs ruler  |david     |drummond
esther |70    |math   |mrs ruler  |esther    |ecklestone
esther |80    |french |dr francois|esther    |ecklestone
</pre></div></div>
</div>
</div>
<div class="section" id="inner-join-(with-other-columns-that-match-names)">
<h3>inner join (with other columns that match names)<a class="headerlink" href="#inner-join-(with-other-columns-that-match-names)" title="Permalink to this headline">¶</a></h3>
<p>By default, if columns are shared but are not in the join, they will be returned with a tuple containing both values</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="c1">## ignore x column for joining</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[5 x 4]
key|y|z|x
a  |4|2|(1, 4)
b  |5|8|(2, 1)
b  |5|9|(2, 2)
c  |6|1|(3, 3)
c  |7|1|(4, 3)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span> <span class="c1">## grab left value</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[5 x 4]
key|y|z|x
a  |4|2|1
b  |5|8|2
b  |5|9|2
c  |6|1|3
c  |7|1|4
</pre></div></div>
</div>
</div>
<div class="section" id="cross-join">
<h3>cross join<a class="headerlink" href="#cross-join" title="Permalink to this headline">¶</a></h3>
<p>If no columns are shared, then a cross join is returned.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[12 x 2]
x|y
1|1
1|2
1|3
...12 rows...
4|1
4|2
4|3
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[])</span> <span class="c1">## you can force a full outer join</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[12 x 2]
x|y
1|1
1|2
1|3
...12 rows...
4|1
4|2
4|3
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span> <span class="o">==</span> <span class="n">x</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
</div>
<div class="section" id="xor-(versus-left-and-right-join)">
<h3>xor (versus left and right join)<a class="headerlink" href="#xor-(versus-left-and-right-join)" title="Permalink to this headline">¶</a></h3>
<p>We find left/right join actually not very useful. There is usually a genuine reason for records for which there is a match and for records for which there isn’t. And the treatment of these is distinct, which means a left-join operation that joins the two outcomes together is positively harmful.</p>
<p>The xor operator is much more useful and you can use it to recreate left/right join if we really must. Here is an example</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">students</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;abramsom&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">,])</span>
<span class="n">new_students</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;david&#39;</span><span class="p">,</span> <span class="s1">&#39;esther&#39;</span><span class="p">,</span> <span class="s1">&#39;fabian&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;drummond&#39;</span><span class="p">,</span> <span class="s1">&#39;ecklestone&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">])</span>

<span class="n">inner_join</span> <span class="o">=</span> <span class="n">grades</span> <span class="o">*</span> <span class="n">students</span> <span class="c1">## grades with students</span>
<span class="n">left_xor</span> <span class="o">=</span> <span class="n">grades</span> <span class="o">/</span> <span class="n">students</span>  <span class="c1">## grades without sudents</span>

<span class="c1"># you can...</span>
<span class="n">left_join</span> <span class="o">=</span> <span class="n">grades</span> <span class="o">*</span> <span class="n">students</span> <span class="o">+</span> <span class="n">grades</span> <span class="o">/</span> <span class="n">students</span> <span class="c1">## grades for which no surname is available will have None surname</span>
<span class="n">left_join</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[9 x 5]
grades|name   |teacher    |surname |subject
30    |alan   |mr bennet  |abramsom|english
40    |alan   |mrs ruler  |abramsom|math
90    |barbara|mr bennet  |brown   |english
...9 rows...
50    |david  |mrs ruler  |None    |math
70    |esther |mrs ruler  |None    |math
80    |esther |dr francois|None    |french
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># but really you want to do:</span>
<span class="n">student_grades</span> <span class="o">=</span> <span class="n">grades</span> <span class="o">*</span> <span class="n">students</span>
<span class="n">unmapped_grades</span> <span class="o">=</span> <span class="n">grades</span> <span class="o">/</span> <span class="n">students</span> <span class="c1">## we treat this one separately...</span>
<span class="n">new_student_grades</span> <span class="o">=</span>  <span class="n">unmapped_grades</span> <span class="o">*</span> <span class="n">new_students</span> <span class="c1">## and grab surnames from the new students table...</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">unmapped_grades</span> <span class="o">/</span> <span class="n">new_student_grades</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;students must exist either in the students table or in the new students table&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">all_grades</span> <span class="o">=</span> <span class="n">student_grades</span> <span class="o">+</span> <span class="n">new_student_grades</span><span class="p">;</span> <span class="n">all_grades</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[9 x 5]
grades|name   |subject|surname   |teacher
30    |alan   |english|abramsom  |mr bennet
40    |alan   |math   |abramsom  |mrs ruler
90    |barbara|english|brown     |mr bennet
...9 rows...
50    |david  |math   |drummond  |mrs ruler
70    |esther |math   |ecklestone|mrs ruler
80    |esther |french |ecklestone|dr francois
</pre></div></div>
</div>
</div>
<div class="section" id="pivot">
<h3>pivot<a class="headerlink" href="#pivot" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
<span class="n">xy</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[16 x 2]
x|y
1|1
1|2
1|3
...16 rows...
4|2
4|3
4|4
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">xy</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 5]
x|1  |2  |3   |4
1|[1]|[2]|[3] |[4]
2|[2]|[4]|[6] |[8]
3|[3]|[6]|[9] |[12]
4|[4]|[8]|[12]|[16]
</pre></div></div>
</div>
</div>
<div class="section" id="a-few-observations:">
<h3>a few observations:<a class="headerlink" href="#a-few-observations:" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>as per usual, can provide a function for values in table (indeed columns y) and not just keys</p></li>
<li><p>the output in the cells come back as a list. This is because sometimes there are more than one row with given x and y, and sometimes there are none:</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">(</span><span class="n">xy</span> <span class="o">+</span> <span class="n">xy</span><span class="p">)</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 5]
x|1     |2     |3       |4
1|[1, 1]|[2, 2]|[3, 3]  |None
2|[2, 2]|[4, 4]|None    |[8, 8]
3|[3, 3]|None  |[9, 9]  |[12, 12]
4|None  |[8, 8]|[12, 12]|[16, 16]
</pre></div></div>
</div>
<p>You can apply a sequence of aggregate functions:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">(</span><span class="n">xy</span> <span class="o">+</span> <span class="n">xy</span><span class="p">)</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dictable[4 x 5]
x|1   |2   |3   |4
1|2   |2   |2   |None
2|2   |2   |None|2
3|2   |None|2   |2
4|None|2   |2   |2
</pre></div></div>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pyg</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../includeme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../base.html">pyg.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mongo.html">pyg.mongo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timeseries.html">pyg.timeseries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_dict.html">pyg.base.Dict</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyg.base.dictable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Motivation:-dictable-as-an-organiser-of-research-flow">Motivation: dictable as an organiser of research flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Same-code,-in-dictable">Same code, in dictable</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Oh,-no,-we-have-a-bad-symbol,-how-do-we-remove-it?">Oh, no, we have a bad symbol, how do we remove it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Now-if-we-want-to-calculate-something-per-symbol-and-window…">Now if we want to calculate something per symbol and window…</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dictable-functionality">dictable functionality</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#construction">construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#row-access">row access</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-access">column access</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-is-a-dict-so-supports-the-usual-keys(),-values()-and-items():">d is a dict so supports the usual keys(), values() and items():</a></li>
<li class="toctree-l3"><a class="reference internal" href="#column-and-row-access-are-commutative">column and row access are commutative</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-records">adding records</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding/modifying-columns">adding/modifying columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do">do</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removing-columns">removing columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removing-rows">removing rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sort">sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="#listby(keys)">listby(keys)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unlist">unlist</a></li>
<li class="toctree-l3"><a class="reference internal" href="#groupby(keys)-and-ungroup">groupby(keys) and ungroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inner-join">inner join</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inner-join-(with-other-columns-that-match-names)">inner join (with other columns that match names)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-join">cross join</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xor-(versus-left-and-right-join)">xor (versus left and right join)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pivot">pivot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-few-observations:">a few observations:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_mongo.html">pyg.mongo</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_cell.html">pyg.base.cell</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_perdictable.html">pyg.base.join</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_timeseries.html">pyg.timeseries</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_ts_decorators.html">pyg.timeseries decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_ts_ewma_time.html">pyg.timeseries.ewma</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tutorial_dict.html" title="previous chapter">pyg.base.Dict</a></li>
      <li>Next: <a href="tutorial_mongo.html" title="next chapter">pyg.mongo</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Yoav Git.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/lab/tutorial_dictable.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>