
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>pyg.timeseries &#8212; pyg 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="pyg.mongo" href="mongo.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pyg-timeseries">
<h1>pyg.timeseries<a class="headerlink" href="#pyg-timeseries" title="Permalink to this headline">¶</a></h1>
<p>Given pandas, why do we need this timeseries library?
pandas is amazing but there are a few features in pyg.timeseries designed to enhance it.
There are three issues with pandas that pyg.timeseries tries  to address:</p>
<ul class="simple">
<li><p>pandas works on pandas objects (obviously) but not on numpy arrays.</p></li>
<li><dl class="simple">
<dt>pandas handles TimeSeries with nan inconsistently across its functions. This makes your results sensitive to reindexing/resampling. E.g.:</dt><dd><ul>
<li><p>a.expanding() &amp; a.ewm() <strong>ignore</strong> nan’s for calculation and then ffill the result.</p></li>
<li><p>a.diff(), a.rolling() <strong>include</strong> any nans in the calculation, leading to nan propagation.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>pandas is great if you have the full timeseries. However, if you now want to run the same calculations in a live environment, on recent data, pandas cannot help you: you have to stick the new data at the end of the DataFrame and rerun.</p></li>
</ul>
<p>pyg.timeseries tries to address this:</p>
<ul class="simple">
<li><p>pyg.timeseries agrees with pandas 100% on DataFrames (with no nan) while being of comparable (if not faster) speed</p></li>
<li><p>pyg.timeseries works seemlessly on pandas objects and on numpy arrays, with no code change.</p></li>
<li><p>pyg.timeseries handles nan consistently across all its functions, ‘ignoring’ all nan, making your results consistent regardless of resampling.</p></li>
<li><dl class="simple">
<dt>pyg.timeseries exposes the state of the internal function calculation. The exposure of internal states allows us to calculate the output of additional data <strong>without</strong> re-running history. This speeds up of two very common problems in finance:</dt><dd><ul>
<li><p>risk calculations, Monte Carlo scenarios: We can run a trading strategy up to today and then generate multiple scenarios and see what-if, without having to rerun the full history.</p></li>
<li><p>live versus history: pandas is designed to run a full historical simulation. However, once we reach “today”, speed is of the essense and running a full historical simulation every time we ingest a new price, is just too slow. That is why most fast trading is built around fast state-machines. Of course, making sure research &amp; live versions do the same thing is tricky. pyg gives you the ability to run two systems in parallel with almost the same code base: run full history overnight and then run today’s code base instantly, instantiated with the output of the historical simulation.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<section id="simple-functions">
<h2>simple functions<a class="headerlink" href="#simple-functions" title="Permalink to this headline">¶</a></h2>
<section id="diff">
<h3>diff<a class="headerlink" href="#diff" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.diff">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to a.diff(n) in pandas if there are no nans. If there are, we SKIP nans rather than propagate them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array/timeseries</span></dt><dd><p>array/timeseries</p>
</dd>
<dt>n: int, optional, default = 1</dt><dd><p>window size</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id1"><span class="problematic" id="id2">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>: matching pandas no nan’s</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="n">diff</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)(</span><span class="n">a</span><span class="p">),</span> <span class="n">timer</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="mi">1000</span><span class="p">)(</span><span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>: nan skipping</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">9.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">diff</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>                      <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span>   <span class="mf">6.0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>   <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mf">6.0</span><span class="p">]))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="shift">
<h3>shift<a class="headerlink" href="#shift" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.shift">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to a.shift() with support to arra</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id3"><span class="problematic" id="id4">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>np.ndarrays</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan skipping</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shift</span><span class="p">(),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span> <span class="c1"># the location of the nan changes</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">shift_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">shift</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">shift</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ratio">
<h3>ratio<a class="headerlink" href="#ratio" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.ratio">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">ratio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to a.diff() but in log-space..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id5"><span class="problematic" id="id6">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ratio</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">4</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">1.25</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ratio</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="o">/</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-count">
<h3>ts_count<a class="headerlink" href="#ts-count" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_count">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">a.count()</span> <span class="pre">(though</span> <span class="pre">slightly</span> <span class="pre">slower</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_count" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>supports numpy arrays</p></li>
<li><p>skips nan</p></li>
<li><p>supports state management</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pandas matching</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sample data:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_count</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_count</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">ts_count</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">ts_count_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">ts_count</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="n">state</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new</span> <span class="o">==</span> <span class="n">ts_count</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-sum">
<h3>ts_sum<a class="headerlink" href="#ts-sum" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_sum">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">a.sum(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_sum" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>supports numpy arrays</p></li>
<li><p>handles nan</p></li>
<li><p>supports state management</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id7"><span class="problematic" id="id8">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pandas matching</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sample data:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">ts_sum_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">vec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new</span> <span class="o">==</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-mean">
<h3>ts_mean<a class="headerlink" href="#ts-mean" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_mean">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">a.mean(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_mean" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>supports numpy arrays</p></li>
<li><p>handles nan</p></li>
<li><p>supports state management</p></li>
<li><p>pandas is actually faster on count</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id9"><span class="problematic" id="id10">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pandas matching</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sample data:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_mean</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">ts_mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">ts_mean_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">ts_mean</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">vec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new</span> <span class="o">==</span> <span class="n">ts_mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-rms">
<h3>ts_rms<a class="headerlink" href="#ts-rms" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_rms">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_rms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_rms" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_rms(a) is equivalent to (a**2).mean()**0.5</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id11"><span class="problematic" id="id12">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<ul class="simple">
<li><p>supports numpy arrays</p></li>
<li><p>handles nan</p></li>
<li><p>supports state management</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sample data:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pandas matching</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">std</span><span class="p">())</span><span class="o">&lt;</span><span class="mf">1e-13</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">ts_rms_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">ts_rms</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">vec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new</span> <span class="o">==</span> <span class="n">ts_rms</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-std">
<h3>ts_std<a class="headerlink" href="#ts-std" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_std">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_std</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">a.std(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_std" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>supports numpy arrays</p></li>
<li><p>handles nan</p></li>
<li><p>supports state management</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sample data:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pandas matching</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">std</span><span class="p">())</span><span class="o">&lt;</span><span class="mf">1e-13</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">ts_std_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">vec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new</span> <span class="o">==</span> <span class="n">ts_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-skew">
<h3>ts_skew<a class="headerlink" href="#ts-skew" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_skew">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_skew</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a</span></em>, <em class="sig-param"><span class="pre">0)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">a.skew(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_skew" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>supports numpy arrays</p></li>
<li><p>handles nan</p></li>
<li><p>faster than pandas</p></li>
<li><p>supports state management</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>min_sample: float, optional</dt><dd><p>This refers to the denominator when we calculate the skew. Over time, the deonimator converges to 1 but initially, it is small. 
Also, if there is a gap in the data, older datapoints weight may have decayed while there are not enough “new point”. 
min_sample ensures that in both cases, if denominator&lt;0.25 )(default value) we return nan.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id13"><span class="problematic" id="id14">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pandas matching</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create sample data:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">));</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts_skew</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">skew</span><span class="p">())</span><span class="o">&lt;</span><span class="mf">1e-13</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts_skew</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">ts_skew</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">ts_skew_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">ts_skew</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="n">vec</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">vec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">new</span> <span class="o">==</span> <span class="n">ts_skew</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ts-min">
<h3>ts_min<a class="headerlink" href="#ts-min" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_max">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">pandas</span> <span class="pre">a.min(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_max" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="ts-max">
<h3>ts_max<a class="headerlink" href="#ts-max" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">a)</span> <span class="pre">is</span> <span class="pre">equivalent</span> <span class="pre">to</span> <span class="pre">pandas</span> <span class="pre">a.min(</span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="ts-median">
<h3>ts_median<a class="headerlink" href="#ts-median" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_median">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_median" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="fnna">
<h3>fnna<a class="headerlink" href="#fnna" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.fnna">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">fnna</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.fnna" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the index in a of the nth first non-nan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n: int, optional, default = 1</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fnna</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">n</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="v2na-na2v">
<h3>v2na/na2v<a class="headerlink" href="#v2na-na2v" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.v2na">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">v2na</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.v2na" title="Permalink to this definition">¶</a></dt>
<dd><p>replaces an old value with a new value (default is nan)</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">v2na</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">v2na</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">v2na</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
old: float</p>
<blockquote>
<div><p>value to be replaced</p>
</div></blockquote>
<dl class="simple">
<dt>new<span class="classifier">float, optional</span></dt><dd><p>new value to be used, The default is np.nan.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>array/timeseries</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.na2v">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">na2v</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.na2v" title="Permalink to this definition">¶</a></dt>
<dd><p>replaces a nan with a new value</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">na2v</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">na2v</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
new : float, optional</p>
<blockquote>
<div><p>DESCRIPTION. The default is 0.0.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>array/timeseries</p>
</dd></dl>

</section>
<section id="ffill-bfill">
<h3>ffill/bfill<a class="headerlink" href="#ffill-bfill" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.ffill">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">ffill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.ffill" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a forward filled array, up to n values forward. 
supports state manegement which is needed if we want only nth</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array/timeseries</span></dt><dd><p>array/timeseries</p>
</dd>
<dt>n: int, optional, default = 1</dt><dd><p>window size</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id15"><span class="problematic" id="id16">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fnna</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.bfill">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">bfill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.bfill" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to a.fillna(‘bfill’). There is no state-aware as this function is forward looking</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">bfill</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>  <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">bfill</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="nona">
<h3>nona<a class="headerlink" href="#nona" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.nona">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">nona</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.nona" title="Permalink to this definition">¶</a></dt>
<dd><p>removes rows that are entirely nan (or a specific other value)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : dataframe/ndarray</p>
<dl class="simple">
<dt>value<span class="classifier">float, optional</span></dt><dd><p>value to be removed. The default is np.nan.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>multiple columns</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span><span class="o">.</span><span class="n">T</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span><span class="o">.</span><span class="n">T</span> <span class="c1">## 2nd row has nans across</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="expanding-window-functions">
<h2>expanding window functions<a class="headerlink" href="#expanding-window-functions" title="Permalink to this headline">¶</a></h2>
<section id="expanding-mean">
<h3>expanding_mean<a class="headerlink" href="#expanding-mean" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_mean">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().mean().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id17"><span class="problematic" id="id18">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">23</span>  <span class="mf">1.562960</span>  <span class="mf">1.562960</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>  <span class="mf">0.908910</span>  <span class="mf">0.908910</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>  <span class="mf">0.846817</span>  <span class="mf">0.846817</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>  <span class="mf">0.821423</span>  <span class="mf">0.821423</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>  <span class="mf">0.821423</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>             <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span>  <span class="mf">0.870358</span>  <span class="mf">0.870358</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">0.870358</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">0.870358</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">0.870358</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">0.870353</span>  <span class="mf">0.870353</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_mean_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_mean</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_mean</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_mean</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-rms">
<h3>expanding_rms<a class="headerlink" href="#expanding-rms" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_rms">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_rms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_rms" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas (a**2).expanding().mean()**0.5).
- works with np.arrays
- handles nan without forward filling.
- supports state parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame, list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id19"><span class="problematic" id="id20">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">23</span>  <span class="mf">0.160462</span>  <span class="mf">0.160462</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>  <span class="mf">0.160462</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>  <span class="mf">0.160462</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>  <span class="mf">0.160462</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>  <span class="mf">0.160462</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span>  <span class="mf">1.040346</span>  <span class="mf">1.040346</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">1.040346</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">1.040338</span>  <span class="mf">1.040338</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">1.040337</span>  <span class="mf">1.040337</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">1.040473</span>  <span class="mf">1.040473</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_rms_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_rms</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_rms</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_rms</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-std">
<h3>expanding_std<a class="headerlink" href="#expanding-std" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_std">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_std</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_std" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().std().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id21"><span class="problematic" id="id22">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">std</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">std</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">23</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>             <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span>  <span class="mf">0.590448</span>  <span class="mf">0.590448</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">0.590448</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">0.590475</span>  <span class="mf">0.590475</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">0.590475</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">0.590411</span>  <span class="mf">0.590411</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_std_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_std</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_std</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_std</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-sum">
<h3>expanding_sum<a class="headerlink" href="#expanding-sum" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_sum">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().sum().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id23"><span class="problematic" id="id24">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">23</span>          <span class="n">NaN</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>          <span class="n">NaN</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>     <span class="mf">0.645944</span>     <span class="mf">0.645944</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>     <span class="mf">2.816321</span>     <span class="mf">2.816321</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>     <span class="mf">2.816321</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">...</span>          <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span>  <span class="mf">3976.911348</span>  <span class="mf">3976.911348</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_sum_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_sum</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_sum</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-skew">
<h3>expanding_skew<a class="headerlink" href="#expanding-skew" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_skew">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_skew</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_skew" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().skew() which doesn’t exist</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id25"><span class="problematic" id="id26">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_skew</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_skew_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_skew</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_skew</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_skew</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_skew</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_skew</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_skew</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_skew</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-min">
<h3>expanding_min<a class="headerlink" href="#expanding-min" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._min.expanding_min">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._min.</span></span><span class="sig-name descname"><span class="pre">expanding_min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._min.expanding_min" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().min().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id27"><span class="problematic" id="id28">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">min</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>  <span class="mf">0.775176</span>  <span class="mf">0.775176</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>  <span class="mf">0.691942</span>  <span class="mf">0.691942</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">28</span>  <span class="mf">0.691942</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>             <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">0.100099</span>  <span class="mf">0.100099</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">0.100099</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">0.100099</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">0.100099</span>  <span class="mf">0.100099</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">08</span>  <span class="mf">0.100099</span>  <span class="mf">0.100099</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_min_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_min</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_min</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_min</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-max">
<h3>expanding_max<a class="headerlink" href="#expanding-max" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._max.expanding_max">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._max.</span></span><span class="sig-name descname"><span class="pre">expanding_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._max.expanding_max" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().max().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id29"><span class="problematic" id="id30">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>  <span class="mf">0.875409</span>  <span class="mf">0.875409</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>  <span class="mf">0.875409</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">28</span>  <span class="mf">0.875409</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>             <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">3.625858</span>  <span class="mf">3.625858</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">3.625858</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">3.625858</span>  <span class="mf">3.625858</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">3.625858</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">08</span>  <span class="mf">3.625858</span>       <span class="n">NaN</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_max_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_max</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_max</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_max</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-median">
<h3>expanding_median<a class="headerlink" href="#expanding-median" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._median.expanding_median">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._median.</span></span><span class="sig-name descname"><span class="pre">expanding_median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._median.expanding_median" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().median().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>There is no state-aware version since this requires essentially the whole history to be stored.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">median</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_median</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">median</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_median</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">23</span>  <span class="mf">1.562960</span>  <span class="mf">1.562960</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>  <span class="mf">0.908910</span>  <span class="mf">0.908910</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>  <span class="mf">0.846817</span>  <span class="mf">0.846817</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>  <span class="mf">0.821423</span>  <span class="mf">0.821423</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>  <span class="mf">0.821423</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>             <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span>  <span class="mf">0.870358</span>  <span class="mf">0.870358</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">0.870358</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">0.870358</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">0.870358</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">0.870353</span>  <span class="mf">0.870353</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_median</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_median</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_median</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_median</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_median</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_median</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="expanding-rank">
<h3>expanding_rank<a class="headerlink" href="#expanding-rank" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rank.expanding_rank">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rank.</span></span><span class="sig-name descname"><span class="pre">expanding_rank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rank.expanding_rank" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a rank of the current value within history, scaled to be -1 if it is the smallest and +1 if it is the largest
- works on mumpy arrays too
- skips nan, no ffill</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span><span class="mf">4.</span><span class="p">,</span><span class="mf">2.</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rank</span> <span class="o">=</span> <span class="n">expanding_rank</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 2 is largest in [1,2] so goes to 1; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 0 is smallest in [1,2,0] so goes to -1 etc.</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy equivalent</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_rank</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">),</span> <span class="n">expanding_rank</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>  
</pre></div>
</div>
</dd></dl>

</section>
<section id="cumsum">
<h3>cumsum<a class="headerlink" href="#cumsum" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.cumsum">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">cumsum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.cumsum" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.expanding().sum().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id31"><span class="problematic" id="id32">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span><span class="n">panda</span><span class="p">)</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">23</span>          <span class="n">NaN</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>          <span class="n">NaN</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>     <span class="mf">0.645944</span>     <span class="mf">0.645944</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>     <span class="mf">2.816321</span>     <span class="mf">2.816321</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>     <span class="mf">2.816321</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="o">...</span>          <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">03</span>  <span class="mf">3976.911348</span>  <span class="mf">3976.911348</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">3976.911348</span>          <span class="n">NaN</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">expanding_sum_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_sum</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">expanding_sum</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">expanding_sum</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="cumprod">
<h3>cumprod<a class="headerlink" href="#cumprod" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.cumprod">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">cumprod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.cumprod" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas np.exp(np.log(a).expanding().sum()).</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id33"><span class="problematic" id="id34">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">());</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not forward fill the nans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">99</span><span class="p">,</span> <span class="mi">2020</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.975</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">expanding</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">());</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">panda</span><span class="p">,</span><span class="n">ts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>  <span class="mf">1.037161</span>  <span class="mf">1.037161</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>  <span class="mf">1.050378</span>  <span class="mf">1.050378</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>  <span class="mf">1.158734</span>  <span class="mf">1.158734</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>  <span class="mf">1.158734</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">28</span>  <span class="mf">1.219402</span>  <span class="mf">1.219402</span>
<span class="gp">&gt;&gt;&gt; </span>             <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">28</span>  <span class="mf">4.032919</span>  <span class="mf">4.032919</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">29</span>  <span class="mf">4.032919</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">30</span>  <span class="mf">4.180120</span>  <span class="mf">4.180120</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">31</span>  <span class="mf">4.180120</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2020</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>  <span class="mf">4.244261</span>  <span class="mf">4.244261</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">50</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">50</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">cumprod_</span><span class="p">(</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">50</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">cumprod</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">cumprod</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">]),</span> <span class="p">[</span><span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">cumprod</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="rolling-window-functions">
<h2>rolling window functions<a class="headerlink" href="#rolling-window-functions" title="Permalink to this headline">¶</a></h2>
<section id="rolling-mean">
<h3>rolling_mean<a class="headerlink" href="#rolling-mean" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_mean">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_mean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).mean().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>time: a sequence of rising values of time</dt><dd><p>passage of time</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id35"><span class="problematic" id="id36">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99% of nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 6 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_mean_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_mean</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_mean</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>passage of time</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1">## i.e. the first two observations are from day 0 and the next two are from day 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rolling_mean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">time</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">([</span><span class="n">nan</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.</span> <span class="p">])</span>  
</pre></div>
</div>
<p>## The first two observations are from day 0 so cannot have a mean until we get a second point
## The mean is then calculated from last observation in day 0 (i.e. 2) and then 3. and then with 4. since these are again, from same day</p>
</dd></dl>

</section>
<section id="rolling-rms">
<h3>rolling_rms<a class="headerlink" href="#rolling-rms" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_rms">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_rms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_rms" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas (a**2).rolling(n).mean()**0.5.</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>time: a sequence of rising values of time</dt><dd><p>passage of time</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id37"><span class="problematic" id="id38">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99% of nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 6 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_rms_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_rms</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_rms</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>passage of time</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1">## i.e. the first two observations are from day 0 and the next two are from day 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">rolling_rms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">time</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">([</span><span class="n">nan</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="mf">13.</span><span class="p">,</span> <span class="mf">20.</span><span class="p">])</span>   <span class="o">==</span> <span class="n">array</span><span class="p">([</span><span class="n">nan</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">16</span><span class="p">])</span>
</pre></div>
</div>
<p>## The first two observations are from day 0 so cannot have a mean until we get a second point
## The rms is then calculated from last observation in day 0 (i.e. 2) and then 3. and then with 4. since these are again, from same day</p>
</dd></dl>

</section>
<section id="rolling-std">
<h3>rolling_std<a class="headerlink" href="#rolling-std" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_std">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_std</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_std" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).std().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>time: a sequence of rising values of time</dt><dd><p>passage of time</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id39"><span class="problematic" id="id40">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99.9% nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 2 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_std_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_std</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_std</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>passage of time</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1">## i.e. the first two observations are from day 0 and the next two are from day 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">rolling_std</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">time</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">([</span><span class="n">nan</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">])</span>
</pre></div>
</div>
<p>## The first two observations are from day 0 so cannot have a mean until we get a second point
## The sum is then calculated from last observation in day 0 (i.e. 2) and then 3. and then with 4. since these are again, from same day</p>
</dd></dl>

</section>
<section id="rolling-sum">
<h3>rolling_sum<a class="headerlink" href="#rolling-sum" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_sum">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).sum().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>time: a sequence of rising values of time</dt><dd><p>passage of time</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id41"><span class="problematic" id="id42">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99.9% nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 2 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_sum_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_sum</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_sum</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>passage of time</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1">## i.e. the first two observations are from day 0 and the next two are from day 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rolling_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">time</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="p">([</span><span class="n">nan</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">])</span>   <span class="o">==</span> <span class="n">array</span><span class="p">([</span><span class="n">nan</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<p>## The first two observations are from day 0 so cannot have a mean until we get a second point
## The sum is then calculated from last observation in day 0 (i.e. 2) and then 3. and then with 4. since these are again, from same day</p>
</dd></dl>

</section>
<section id="rolling-skew">
<h3>rolling_skew<a class="headerlink" href="#rolling-skew" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_skew">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_skew</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_skew" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).skew().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>time: a sequence of rising values of time</dt><dd><p>passage of time</p>
</dd>
<dt>bias: </dt><dd><p>affects the skew calculation definition, see scipy documentation for details.</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id43"><span class="problematic" id="id44">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">skew</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99.9% nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">skew</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 2 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_skew_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_skew</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_skew</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_skew</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rolling-min">
<h3>rolling_min<a class="headerlink" href="#rolling-min" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._min.rolling_min">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._min.</span></span><span class="sig-name descname"><span class="pre">rolling_min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._min.rolling_min" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).min().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id45"><span class="problematic" id="id46">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99% of nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 6 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_min_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_min</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_min</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_min</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rolling-max">
<h3>rolling_max<a class="headerlink" href="#rolling-max" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._max.rolling_max">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._max.</span></span><span class="sig-name descname"><span class="pre">rolling_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._max.rolling_max" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).max().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id47"><span class="problematic" id="id48">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99% of nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#original: 4534 timeseries: 4525 panda: 6 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_max_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_max</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_max</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_max</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rolling-median">
<h3>rolling_median<a class="headerlink" href="#rolling-median" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._median.rolling_median">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._median.</span></span><span class="sig-name descname"><span class="pre">rolling_median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._median.rolling_median" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to pandas a.rolling(n).median().</p>
<ul class="simple">
<li><p>works with np.arrays</p></li>
<li><p>handles nan without forward filling.</p></li>
<li><p>supports state parameters</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>size of rolling window</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id49"><span class="problematic" id="id50">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>agreement with pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">panda</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>   
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>Unlike pandas, timeseries does not include the nans in the rolling calculation: it skips them.
Since pandas rolling engine does not skip nans, they propagate. 
In fact, having removed half the data points, rolling(10) will return 99% of nans</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">panda</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">();</span> <span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#original:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">a</span><span class="p">)),</span> <span class="s1">&#39;timeseries:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="s1">&#39;panda:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nona</span><span class="p">(</span><span class="n">panda</span><span class="p">)),</span> <span class="s1">&#39;data points&#39;</span><span class="p">)</span>
<span class="go">#original: 4634 timeseries: 4625 panda: 4 data points</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<p>One can split the calculation and run old and new data separately.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">rolling_median_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dict/list inputs</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_median</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_median</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">rolling_median</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rolling-quantile">
<h3>rolling_quantile<a class="headerlink" href="#rolling-quantile" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._stride.rolling_quantile">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._stride.</span></span><span class="sig-name descname"><span class="pre">rolling_quantile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._stride.rolling_quantile" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to a.rolling(n).quantile(q) except…
- supports numpy arrays
- supports multiple q values</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">rolling_quantile</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">sub_</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-13</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>multiple quantiles</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">rolling_quantile</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mf">0.3</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-13</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">rolling_quantile</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">rolling_quantile_</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2000</span><span class="p">],</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">rolling_quantile</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2000</span><span class="p">:],</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="o">**</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">both</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">old</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">new</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">both</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n : integer</p>
<blockquote>
<div><p>window size.</p>
</div></blockquote>
<dl class="simple">
<dt>q<span class="classifier">float or list of floats in [0,1]</span></dt><dd><p>quantile(s).</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id51"><span class="problematic" id="id52">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>timeseries/array of quantile(s)</p>
</dd></dl>

</section>
<section id="rolling-rank">
<h3>rolling_rank<a class="headerlink" href="#rolling-rank" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rank.rolling_rank">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rank.</span></span><span class="sig-name descname"><span class="pre">rolling_rank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rank.rolling_rank" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a rank of the current value within a given window, scaled to be -1 if it is the smallest and +1 if it is the largest
- works on mumpy arrays too
- skips nan, no ffill</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">array, pd.Series, pd.DataFrame or list/dict of these</span></dt><dd><p>timeseries</p>
</dd>
<dt>n: int</dt><dd><p>window size</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>0/1/-1. The default is 0.</p>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id53"><span class="problematic" id="id54">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rank</span> <span class="o">=</span> <span class="n">rolling_rank</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rank</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 0 is smallest in [1,2,0] so goes to -1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 4 is largest in [2,0,4] so goes to +1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># 2 is middle of [0,4,2] so goes to 0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy equivalent</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">rolling_rank</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">rolling_rank</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>  
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">rolling_rank_</span><span class="p">(</span><span class="n">a</span><span class="p">[:</span><span class="mi">5000</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span> <span class="c1"># grab both data and state</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">rolling_rank</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">5000</span><span class="p">:],</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">old</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="n">new</span><span class="p">]),</span> <span class="n">rolling_rank</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="exponentially-weighted-moving-functions">
<h2>exponentially weighted moving functions<a class="headerlink" href="#exponentially-weighted-moving-functions" title="Permalink to this headline">¶</a></h2>
<section id="ewma">
<h3>ewma<a class="headerlink" href="#ewma" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewma">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewma" title="Permalink to this definition">¶</a></dt>
<dd><p>ewma is equivalent to a.ewm(n).mean() but with…
- supports np.ndarrays as well as timeseries
- handles nan by skipping them
- allows state-management
- ability to supply a ‘clock’ to the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id55"><span class="problematic" id="id56">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>matching pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ts</span><span class="p">,</span><span class="n">df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                       <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>  <span class="mf">0.263875</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">28</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>       <span class="n">NaN</span>  <span class="mf">0.786506</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">0.928817</span>  <span class="mf">0.928817</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>       <span class="n">NaN</span>  <span class="mf">0.928817</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">0.839168</span>  <span class="mf">0.839168</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">08</span>  <span class="mf">0.831109</span>  <span class="mf">0.831109</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">ewma_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for time &amp; clock</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daily</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly</span> <span class="o">=</span> <span class="n">daily</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m_ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">monthly</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">## 3-month ewma run on monthly data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d_ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">daily</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span> <span class="c1">## 3-month ewma run on daily data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_resampled_to_month</span> <span class="o">=</span> <span class="n">d_ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">daily_resampled_to_month</span> <span class="o">-</span> <span class="n">m_ts</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
</pre></div>
</div>
<p>So you can run a 3-monthly ewma on daily, where within month, most recent value is used with the EOM history.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for dict/list of arrays</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">));</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewma</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">ewma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">ewma</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewma</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">ewma</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">ewma</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>an array/timeseries of ewma</p>
</dd></dl>

</section>
<section id="ewmrms">
<h3>ewmrms<a class="headerlink" href="#ewmrms" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmrms">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmrms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmrms" title="Permalink to this definition">¶</a></dt>
<dd><p>ewmrms is equivalent to (a**2).ewm(n).mean()**0.5  but with…
- supports np.ndarrays as well as timeseries
- handles nan by skipping them
- allows state-management
- ability to supply a ‘clock’ to the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id57"><span class="problematic" id="id58">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>matching pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmrms</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&lt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ts</span><span class="p">,</span><span class="n">df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>                       <span class="mi">0</span>         <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>  <span class="mf">0.263875</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1993</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">28</span>       <span class="n">NaN</span>  <span class="mf">0.263875</span>
<span class="gp">&gt;&gt;&gt; </span>                 <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">04</span>       <span class="n">NaN</span>  <span class="mf">0.786506</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">05</span>  <span class="mf">0.928817</span>  <span class="mf">0.928817</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">06</span>       <span class="n">NaN</span>  <span class="mf">0.928817</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">0.839168</span>  <span class="mf">0.839168</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">08</span>  <span class="mf">0.831109</span>  <span class="mf">0.831109</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">ewmrms_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for time &amp; clock</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daily</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly</span> <span class="o">=</span> <span class="n">daily</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m_ts</span> <span class="o">=</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">monthly</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">## 3-month ewma run on monthly data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d_ts</span> <span class="o">=</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">daily</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span> <span class="c1">## 3-month ewma run on daily data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_resampled_to_month</span> <span class="o">=</span> <span class="n">d_ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">daily_resampled_to_month</span> <span class="o">-</span> <span class="n">m_ts</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
</pre></div>
</div>
<p>So you can run a 3-monthly ewma on daily, where within month, most recent value is used with the EOM history.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for dict/list of arrays</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">));</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmrms</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">ewmrms</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">ewmrms</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmrms</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">ewmrms</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">ewmrms</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>an array/timeseries of ewma</p>
</dd></dl>

</section>
<section id="ewmstd">
<h3>ewmstd<a class="headerlink" href="#ewmstd" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmstd">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmstd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmstd" title="Permalink to this definition">¶</a></dt>
<dd><p>ewmstd is equivalent to a.ewm(n).std() but with…
- supports np.ndarrays as well as timeseries
- handles nan by skipping them
- allows state-management
- ability to supply a ‘clock’ to the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id59"><span class="problematic" id="id60">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>matching pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&lt;-</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">ewmstd_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for time &amp; clock</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daily</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly</span> <span class="o">=</span> <span class="n">daily</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m_ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">monthly</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">## 3-month ewma run on monthly data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d_ts</span> <span class="o">=</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">daily</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span> <span class="c1">## 3-month ewma run on daily data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_resampled_to_month</span> <span class="o">=</span> <span class="n">d_ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">daily_resampled_to_month</span> <span class="o">-</span> <span class="n">m_ts</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
</pre></div>
</div>
<p>So you can run a 3-monthly ewma on daily, where within month, most recent value is used with the EOM history.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for dict/list of arrays</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">));</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmstd</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">ewmstd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">ewmstd</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmstd</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">ewmstd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>an array/timeseries of ewma</p>
</dd></dl>

</section>
<section id="ewmskew">
<h3>ewmskew<a class="headerlink" href="#ewmskew" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmskew">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmskew</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmskew" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to a.ewm(n).skew() but with…
- supports np.ndarrays as well as timeseries
- handles nan by skipping them
- allows state-management
- ability to supply a ‘clock’ to the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id61"><span class="problematic" id="id62">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>matching pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">skew</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ewma_</span><span class="p">,</span> <span class="n">ewmstd_</span><span class="p">,</span> <span class="n">ewmrms_</span><span class="p">,</span> <span class="n">ewmskew_</span><span class="p">,</span> <span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">both</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">o</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">n</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">**</span><span class="n">o</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">both</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">both</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span> 
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">assert</span> <span class="n">both</span> <span class="o">-</span> <span class="s1">&#39;data&#39;</span> <span class="o">==</span> <span class="n">n</span> <span class="o">-</span> <span class="s1">&#39;data&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">-</span> <span class="n">ewmstd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-14</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<p>while panadas ffill values, timeseries skips nans:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&gt;</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">ts</span><span class="p">)],</span> <span class="n">ewma</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">a</span><span class="p">)],</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>initiating the ewma with past state</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_</span> <span class="o">=</span> <span class="n">ewma_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">t0</span> <span class="o">=</span> <span class="n">old_ewma</span><span class="o">.</span><span class="n">t0</span><span class="p">,</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">old_ewma</span><span class="o">.</span><span class="n">t1</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_2</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">old</span><span class="p">,</span><span class="n">new</span><span class="p">]),</span> <span class="mi">10</span><span class="p">)[</span><span class="o">-</span><span class="mi">100</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ewma</span><span class="p">,</span> <span class="n">new_ewma2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for time &amp; clock</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daily</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly</span> <span class="o">=</span> <span class="n">daily</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">monthly</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">## 3-month ewma run on monthly data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ewma</span><span class="p">(</span><span class="n">daily</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span> <span class="c1">## 3-month ewma run on daily data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_resampled_to_month</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">daily_resampled_to_month</span> <span class="o">-</span> <span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
</pre></div>
</div>
<p>So you can run a 3-monthly ewma on daily, where within month, most recent value is used with the EOM history.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>an array/timeseries of ewma</p>
</dd></dl>

</section>
<section id="ewmvar">
<h3>ewmvar<a class="headerlink" href="#ewmvar" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmvar">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmvar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmvar" title="Permalink to this definition">¶</a></dt>
<dd><p>ewmstd is equivalent to a.ewm(n).var() but with…
- supports np.ndarrays as well as timeseries
- handles nan by skipping them
- allows state-management
- ability to supply a ‘clock’ to the calculation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>data: None.</dt><dd><p>unused at the moment. Allow code such as func(live, <a href="#id63"><span class="problematic" id="id64">**</span></a>func_(history)) to work</p>
</dd>
<dt>state: dict, optional</dt><dd><p>state parameters used to instantiate the internal calculations, based on history prior to ‘a’ provided.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>matching pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&lt;-</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">var</span><span class="p">()</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">bias</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">ewmvar_</span><span class="p">(</span><span class="n">old</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for time &amp; clock</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daily</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly</span> <span class="o">=</span> <span class="n">daily</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m_ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">monthly</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">## 3-month ewma run on monthly data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d_ts</span> <span class="o">=</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">daily</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">)</span> <span class="c1">## 3-month ewma run on daily data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_resampled_to_month</span> <span class="o">=</span> <span class="n">d_ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">daily_resampled_to_month</span> <span class="o">-</span> <span class="n">m_ts</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
</pre></div>
</div>
<p>So you can run a 3-monthly ewma on daily, where within month, most recent value is used with the EOM history.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Support for dict/list of arrays</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">));</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmvar</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">),</span><span class="mi">10</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">ewmvar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">ewmvar</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmvar</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">],</span><span class="mi">10</span><span class="p">),</span> <span class="p">[</span><span class="n">ewmvar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">ewmvar</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>an array/timeseries of ewma</p>
</dd></dl>

</section>
<section id="ewmcor">
<h3>ewmcor<a class="headerlink" href="#ewmcor" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmcor">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmcor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmcor" title="Permalink to this definition">¶</a></dt>
<dd><p>calculates pair-wise correlation between a and b.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : array/timeseries
b : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>min_sample<span class="classifier">floar, optional</span></dt><dd><p>minimum weight of observations before we return a reading. The default is 0.25. This ensures that we don’t get silly numbers due to small population.</p>
</dd>
<dt>bias<span class="classifier">book, optional</span></dt><dd><p>vol estimation for a and b should really by unbiased. Nevertheless, we track pandas and set bias = True as a default.</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>axis of calculation. The default is 0.</p>
</dd>
<dt>data<span class="classifier">place holder, ignore, optional</span></dt><dd><p>ignore. The default is None.</p>
</dd>
<dt>state<span class="classifier">dict, optional</span></dt><dd><p>Output from a previous run of <a class="reference internal" href="#ewmcor">ewmcor</a>. The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>matching pandas</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">9000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">8999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmcor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmcor</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewmcor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&lt;-</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmcor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">];</span> <span class="n">old_b</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:];</span> <span class="n">new_b</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">ewmcor_</span><span class="p">(</span><span class="n">old_a</span><span class="p">,</span> <span class="n">old_b</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">ewmcor</span><span class="p">(</span><span class="n">new_a</span><span class="p">,</span> <span class="n">new_b</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmcor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ewmcorr">
<h3>ewmcorr<a class="headerlink" href="#ewmcorr" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmcorr">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmcorr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmcorr" title="Permalink to this definition">¶</a></dt>
<dd><p>This calculates a full correlation matrix as a timeseries. 
The calculation is returned as an xarray.Dataset object, which is a multidimensional data structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a<span class="classifier">np.array or a pd.DataFrame</span></dt><dd><p>timeseries to calculate correlation for</p>
</dd>
<dt>n<span class="classifier">int</span></dt><dd><p>days for which rolling correlation is calculated.</p>
</dd>
<dt>min_sample<span class="classifier">float, optional</span></dt><dd><p>Minimum observations needed before we calculate correlation. The default is 0.25.</p>
</dd>
<dt>bias<span class="classifier">bool, optional</span></dt><dd><p>input to stdev calculations, the default is False.</p>
</dd>
<dt>instate<span class="classifier">dict, optional</span></dt><dd><p>historical calculations so far.</p>
</dd>
</dl>
<dl class="simple">
<dt>correlation dataset</dt><dd><p>an xarray.Dataset unless there are only two timeserieses</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>a pair of ts</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rtn</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x0</span> <span class="o">=</span> <span class="n">ewmxo</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)[</span><span class="mi">50</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">ewmxo</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">)[</span><span class="mi">50</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span><span class="n">x1</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9949</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">ewmcorr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>    <span class="n">Out</span><span class="p">[</span><span class="mi">130</span><span class="p">]:</span> 
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span>         <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span>         <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">09</span>         <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span>         <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">11</span>         <span class="n">NaN</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>    <span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span>    <span class="mf">0.890766</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">30</span>    <span class="mf">0.886926</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span>    <span class="mf">0.883054</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">01</span>    <span class="mf">0.879577</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">02</span>    <span class="mf">0.875766</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">Length</span><span class="p">:</span> <span class="mi">9950</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>a pair of ts</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rtn</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x0</span> <span class="o">=</span> <span class="n">ewmxo</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)[</span><span class="mi">50</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">ewmxo</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">)[</span><span class="mi">50</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">=</span> <span class="n">ewmxo</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">30</span><span class="p">)[</span><span class="mi">50</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9949</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">ewmcorr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Dimensions</span><span class="p">:</span>  <span class="p">(</span><span class="n">index</span><span class="p">:</span> <span class="mi">9950</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Coordinates</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="o">*</span> <span class="n">index</span>    <span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="n">datetime64</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span> <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span> <span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span> <span class="o">...</span> <span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">02</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">U1</span> <span class="s1">&#39;a&#39;</span> <span class="s1">&#39;b&#39;</span> <span class="s1">&#39;c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">U1</span> <span class="s1">&#39;a&#39;</span> <span class="s1">&#39;b&#39;</span> <span class="s1">&#39;c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">cor</span>      <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">1.0</span> <span class="n">nan</span> <span class="n">nan</span> <span class="n">nan</span> <span class="o">...</span> <span class="mf">0.9402</span> <span class="mf">0.7254</span> <span class="mf">0.9402</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>To access individual correlations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a_vs_b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">cor</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<p>To access all correlations to a:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subset</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_vs_all</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">cor</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">subset</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_vs_all</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>                  <span class="n">a</span>         <span class="n">b</span>         <span class="n">c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">07</span>  <span class="mf">1.0</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">08</span>  <span class="mf">1.0</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">09</span>  <span class="mf">1.0</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span>  <span class="mf">1.0</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1994</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">11</span>  <span class="mf">1.0</span>       <span class="n">NaN</span>       <span class="n">NaN</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>       <span class="o">...</span>       <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">29</span>  <span class="mf">1.0</span>  <span class="mf">0.890766</span>  <span class="mf">0.753859</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">30</span>  <span class="mf">1.0</span>  <span class="mf">0.886926</span>  <span class="mf">0.746812</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span>  <span class="mf">1.0</span>  <span class="mf">0.883054</span>  <span class="mf">0.739746</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">01</span>  <span class="mf">1.0</span>  <span class="mf">0.879577</span>  <span class="mf">0.733322</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2021</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">02</span>  <span class="mf">1.0</span>  <span class="mf">0.875766</span>  <span class="mf">0.725399</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ewmlr">
<h3>ewmLR<a class="headerlink" href="#ewmlr" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmLR">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmLR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmLR" title="Permalink to this definition">¶</a></dt>
<dd><p>calculates pair-wise linear regression between a and b.
We have a and b for which we want to fit:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b_i</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">m</span> <span class="n">a_i</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">LSE</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">m</span><span class="p">)</span> <span class="o">=</span> \<span class="nb">sum</span> <span class="n">w_i</span> <span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="n">m</span> <span class="n">a_i</span> <span class="o">-</span> <span class="n">b_i</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dLSE</span><span class="o">/</span><span class="n">dc</span>  <span class="o">=</span> <span class="mi">0</span>  <span class="o">&lt;==&gt;</span> \<span class="nb">sum</span> <span class="n">w_i</span>  <span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="n">m</span> <span class="n">a_i</span> <span class="o">-</span> <span class="n">b_i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>    <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dLSE</span><span class="o">/</span><span class="n">dm</span>  <span class="o">=</span> <span class="mi">0</span> <span class="o">&lt;==&gt;</span> \<span class="nb">sum</span> <span class="n">w_i</span>  <span class="n">a_i</span> <span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="n">m</span> <span class="n">a_i</span> <span class="o">-</span> <span class="n">b_i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>     <span class="o">+</span> <span class="n">mE</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>    <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>     <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cE</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="n">mE</span><span class="p">(</span><span class="n">a</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>  <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>    <span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cE</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="n">mE</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span>  <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="n">E</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span> <span class="o">-</span> <span class="n">E</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="n">E</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">covar</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="n">var</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">-</span> <span class="n">mE</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>a : array/timeseries
b : array/timeseries
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>min_sample<span class="classifier">floar, optional</span></dt><dd><p>minimum weight of observations before we return a reading. The default is 0.25. This ensures that we don’t get silly numbers due to small population.</p>
</dd>
<dt>bias<span class="classifier">book, optional</span></dt><dd><p>vol estimation for a and b should really by unbiased. Nevertheless, we track pandas and set bias = True as a default.</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>axis of calculation. The default is 0.</p>
</dd>
<dt>c,m<span class="classifier">place holder, ignore, optional</span></dt><dd><p>ignore. The default is None.</p>
</dd>
<dt>state<span class="classifier">dict, optional</span></dt><dd><p>Output from a previous run of <a class="reference internal" href="#ewmcor">ewmcor</a>. The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>numpy arrays support</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ewmLR</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">ewmLR</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>nan handling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="o">&lt;-</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmcor</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">);</span> <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="c1"># note: pandas assumes, &#39;time&#39; pass per index entry, even if value is nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ts</span><span class="o">-</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">&lt;</span><span class="mf">1e-10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>state management</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">];</span> <span class="n">old_b</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:];</span> <span class="n">new_b</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_ts</span> <span class="o">=</span> <span class="n">ewmLR_</span><span class="p">(</span><span class="n">old_a</span><span class="p">,</span> <span class="n">old_b</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ts</span> <span class="o">=</span> <span class="n">ewmLR</span><span class="p">(</span><span class="n">new_a</span><span class="p">,</span> <span class="n">new_b</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">**</span><span class="n">old_ts</span><span class="p">)</span> <span class="c1"># instantiation with previous ewma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ewmLR</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new_ts</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="n">ts</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5000</span><span class="p">:])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">a0</span> <span class="o">-</span> <span class="n">a1</span><span class="p">)</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">a0</span><span class="p">,</span><span class="n">a1</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LR</span> <span class="o">=</span> <span class="n">ewmLR</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">LR</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">LR</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">0.5</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ewmglm">
<h3>ewmGLM<a class="headerlink" href="#ewmglm" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmGLM">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmGLM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmGLM" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a General Linear Model fitting b to a.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>a : a 2-d array/pd.DataFrame of values fitting b
b : a 1-d array/pd.Series
n : int/fraction</p>
<blockquote>
<div><p>The number or days (or a ratio) to scale the history</p>
</div></blockquote>
<dl class="simple">
<dt>time<span class="classifier">Calendar, ‘b/d/y/m’ or a timeseries of time (use clock(a) to see output)</span></dt><dd><dl class="simple">
<dt>If time parameter is provided, we allow multiple observations per unit of time. i.e., converging to the last observation in time unit. </dt><dd><ul class="simple">
<li><p>if we have intraday data, and set time = ‘d’, then</p></li>
<li><p>the ewm calculation on last observations per day is what is retained.</p></li>
<li><p>the ewm calculation on each intraday observation is same as an ewm(past EOD + current intraday observation)</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>min_sample<span class="classifier">floar, optional</span></dt><dd><p>minimum weight of observations before we return the fitting. The default is 0.25. This ensures that we don’t get silly numbers due to small population.</p>
</dd>
<dt>data<span class="classifier">place holder, ignore, optional</span></dt><dd><p>ignore. The default is None.</p>
</dd>
<dt>state<span class="classifier">dict, optional</span></dt><dd><p>Output from a previous run of <a class="reference internal" href="#ewmglm">ewmGLM</a>. The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Theory</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>See <a class="reference external" href="https://en.wikipedia.org/wiki/Generalized_linear_model">https://en.wikipedia.org/wiki/Generalized_linear_model</a> for full details.
Briefly, we assume b is single column while a is multicolumn. 
We minimize least square error (LSE) fitting:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span>\<span class="n">sum_j</span> <span class="n">m_j</span> <span class="n">a_j</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">LSE</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">=</span> \<span class="n">sum_i</span> <span class="n">w_i</span> <span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> \<span class="n">sum_j</span> <span class="n">m_j</span> <span class="o">*</span> <span class="n">a_j</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dLSE</span><span class="o">/</span><span class="n">dm_k</span> <span class="o">=</span> <span class="mi">0</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="o">&lt;==&gt;</span>  \<span class="n">sum_i</span> <span class="n">w_i</span> <span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> \<span class="n">sum_j</span> <span class="n">m_j</span> <span class="o">*</span> <span class="n">a_j</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">a_k</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">&lt;==&gt;</span>  <span class="n">E</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="n">a_k</span><span class="p">)</span> <span class="o">=</span> <span class="n">m_k</span> <span class="n">E</span><span class="p">(</span><span class="n">a_k</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">sum_</span><span class="p">{</span><span class="n">j</span><span class="o">&lt;&gt;</span><span class="n">k</span><span class="p">}</span> <span class="n">m_k</span> <span class="n">E</span><span class="p">(</span><span class="n">a_j</span> <span class="n">a_k</span><span class="p">)</span> 
</pre></div>
</div>
<p>E is expectation under weights w. And we can rewrite it as:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="n">x</span> <span class="n">m</span> <span class="o">=</span> <span class="n">ab</span> <span class="c1">## matrix multiplication</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">a_i</span> <span class="o">*</span> <span class="n">a_j</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ab</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">E</span><span class="p">(</span><span class="n">a_j</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">a2</span><span class="o">.</span><span class="n">inverse</span> <span class="n">x</span> <span class="n">ab</span> <span class="c1">## matrix multiplication    </span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>simple fit</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,(</span><span class="mi">10000</span><span class="p">,</span><span class="mi">10</span><span class="p">)),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">true_m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">true_m</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">noise</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fitted_m</span> <span class="o">=</span> <span class="n">ewmGLM</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>    
</pre></div>
</div>
</dd></dl>

</section>
<section id="ewmxo">
<h3>ewmxo<a class="headerlink" href="#ewmxo" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewmxo.ewmxo">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewmxo.</span></span><span class="sig-name descname"><span class="pre">ewmxo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rtn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewmxo.ewmxo" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the normalized crossover function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">ewma</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="n">fast</span><span class="p">)</span> <span class="o">-</span> <span class="n">ewma</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="n">slow</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">ewmstd</span><span class="p">(</span><span class="n">rtn</span><span class="p">,</span> <span class="n">vol</span><span class="p">)</span> <span class="o">*</span> <span class="n">ou_factor</span><span class="p">(</span><span class="n">fast</span><span class="p">,</span> <span class="n">slow</span><span class="p">))</span>
</pre></div>
</div>
<p>The OU factor normalizes the result so that rms(res) is approximately 1</p>
<dl class="simple">
<dt>rtn:  timeseries</dt><dd><p>The returns of a financial process</p>
</dd>
<dt>fast<span class="classifier">int/frac</span></dt><dd><p>number of days. can also be 1/(1+days) if presented as a fraction</p>
</dd>
<dt>slow<span class="classifier">int/frc</span></dt><dd><p>number of days. can also be 1/(1+days) if presented as a fraction</p>
</dd>
<dt>vol: int/frc</dt><dd><p>number of days. used for calculating the volatility horizon</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="p">;</span> <span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">rtn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">),</span><span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">9999</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fast</span> <span class="o">=</span> <span class="mi">64</span><span class="p">;</span> <span class="n">slow</span> <span class="o">=</span> <span class="mi">192</span><span class="p">;</span> <span class="n">vol</span> <span class="o">=</span> <span class="mi">32</span><span class="p">;</span> <span class="n">instate</span> <span class="o">=</span> <span class="kc">None</span>    
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="functions-exposing-their-state">
<h2>functions exposing their state<a class="headerlink" href="#functions-exposing-their-state" title="Permalink to this headline">¶</a></h2>
<section id="id65">
<h3>simple functions<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.diff_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">diff_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.diff_" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a forward filled array, up to n values forward. 
Equivalent to diff(a,n) but returns the full state. See diff for full details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.shift_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">shift_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.shift_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to shift(a,n) but returns the full state. See shift for full details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.ratio_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">ratio_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.ratio_" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_count_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_count_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_count_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_count_(a) is equivalent to ts_count(a) except vec is also returned.
See ts_count for full documentation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_sum_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_sum_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_sum_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_sum_(a) is equivalent to ts_sum(a) except vec is also returned.
See ts_sum for full documentation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_mean_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_mean_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_mean_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_mean_(a) is equivalent to ts_mean(a) except vec is also returned.
See ts_mean for full documentation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_rms_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_rms_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_rms_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_rms_(a) is equivalent to ts_rms(a) except it also returns vec
see ts_rms for full documentation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_std_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_std_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_std_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_std_(a) is equivalent to ts_std(a) except vec is also returned.
See ts_std for full documentation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_skew_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_skew_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_skew_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_skew_(a) is equivalent to ts_skew except vec is also returned.
See ts_skew for full details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ts.ts_max_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_max_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ts.ts_max_" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_max(a) is equivalent to pandas a.min()</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id66">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ts.</span></span><span class="sig-name descname"><span class="pre">ts_max_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id66" title="Permalink to this definition">¶</a></dt>
<dd><p>ts_max(a) is equivalent to pandas a.min()</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.ffill_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">ffill_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.ffill_" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a forward filled array, up to n values forward. 
supports state manegement</p>
</dd></dl>

</section>
<section id="id67">
<h3>expanding window functions<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_mean_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_mean_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_mean_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to expanding_mean(a) but returns also the state variables. 
For full documentation, look at expanding_mean.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_rms_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_rms_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_rms_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to expanding_rms(a) but returns also the state variables.
For full documentation, look at expanding_rms.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_std_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_std_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_std_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to expanding_mean(a) but returns also the state variables. 
For full documentation, look at expanding_std.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_sum_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_sum_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_sum_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to expanding_sum(a) but returns also the state variables.
For full documentation, look at expanding_sum.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.expanding_skew_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">expanding_skew_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.expanding_skew_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to expanding_mean(a) but returns also the state variables. 
For full documentation, look at expanding_skew.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._min.expanding_min_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._min.</span></span><span class="sig-name descname"><span class="pre">expanding_min_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._min.expanding_min_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to a.expanding().min() but returns the full state: i.e. both 
data: the expanding().min()
m: the current minimum</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._max.expanding_max_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._max.</span></span><span class="sig-name descname"><span class="pre">expanding_max_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._max.expanding_max_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to a.expanding().max() but returns the full state: i.e. both 
data: the expanding().max()
m: the current maximum</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.cumsum_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">cumsum_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.cumsum_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to expanding_sum(a) but returns also the state variables.
For full documentation, look at expanding_sum.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._expanding.cumprod_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._expanding.</span></span><span class="sig-name descname"><span class="pre">cumprod_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._expanding.cumprod_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to cumprod(a) but returns also the state variable. 
For full documentation, look at cumprod.__doc__</p>
</dd></dl>

</section>
<section id="id68">
<h3>rolling window functions<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_mean_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_mean_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_mean_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_mean(a) but returns also the state variables t0,t1 etc. 
For full documentation, look at rolling_mean.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_rms_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_rms_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_rms_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_rms(a) but returns also the state variables t0,t1 etc. 
For full documentation, look at rolling_rms.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_std_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_std_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_std_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_std(a) but returns also the state variables t0,t1 etc. 
For full documentation, look at rolling_std.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_sum_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_sum_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_sum_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_sum(a) but returns also the state variables t0,t1 etc. 
For full documentation, look at rolling_sum.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rolling.rolling_skew_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rolling.</span></span><span class="sig-name descname"><span class="pre">rolling_skew_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rolling.rolling_skew_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_skew(a) but returns also the state variables t0,t1 etc. 
For full documentation, look at rolling_skew.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._min.rolling_min_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._min.</span></span><span class="sig-name descname"><span class="pre">rolling_min_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._min.rolling_min_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_min(a) but returns also the state. 
For full documentation, look at rolling_min.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._max.rolling_max_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._max.</span></span><span class="sig-name descname"><span class="pre">rolling_max_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._max.rolling_max_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_max(a) but returns also the state. 
For full documentation, look at rolling_max.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._median.rolling_median_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._median.</span></span><span class="sig-name descname"><span class="pre">rolling_median_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._median.rolling_median_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_median(a) but returns also the state. 
For full documentation, look at rolling_median.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._rank.rolling_rank_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._rank.</span></span><span class="sig-name descname"><span class="pre">rolling_rank_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._rank.rolling_rank_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_rank(a) but returns also the state variables.
For full documentation, look at rolling_rank.__doc__</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._stride.rolling_quantile_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._stride.</span></span><span class="sig-name descname"><span class="pre">rolling_quantile_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._stride.rolling_quantile_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to rolling_quantile(a) but returns also the state. 
For full documentation, look at rolling_quantile.__doc__</p>
</dd></dl>

</section>
<section id="id69">
<h3>exponentially weighted moving functions<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewma_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewma_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewma_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewma but returns a state parameter for instantiation of later calculations.
See ewma documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmrms_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmrms_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmrms_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmrms but returns a state parameter for instantiation of later calculations.
See ewmrms documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmstd_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmstd_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmstd_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmstd but returns a state parameter for instantiation of later calculations.
See ewmstd documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmvar_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmvar_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmvar_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmvar but returns a state parameter for instantiation of later calculations.
See ewmvar documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmcor_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmcor_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmcor_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmcor but returns a state parameter for instantiation of later calculations.
See ewmcor documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmcorr_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmcorr_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmcorr_" title="Permalink to this definition">¶</a></dt>
<dd><p>This calculates a full correlation matrix as a timeseries. Also returns the recent state of the calculations.
See ewmcorr for full details.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmLR_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmLR_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmLR_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmcor but returns a state parameter for instantiation of later calculations.
See ewmcor documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmGLM_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmGLM_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmGLM_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmGLM but returns a state parameter for instantiation of later calculations.
See ewmGLM documentation for more details</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._ewm.ewmskew_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._ewm.</span></span><span class="sig-name descname"><span class="pre">ewmskew_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._ewm.ewmskew_" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to ewmskew but returns a state parameter for instantiation of later calculations.
See ewmskew documentation for more details</p>
</dd></dl>

</section>
</section>
<section id="index-handling">
<h2>Index handling<a class="headerlink" href="#index-handling" title="Permalink to this headline">¶</a></h2>
<section id="df-fillna">
<h3>df_fillna<a class="headerlink" href="#df-fillna" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.df_fillna">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">df_fillna</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.df_fillna" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivelent to df.fillna() except:</p>
<ul class="simple">
<li><p>support np.ndarray as well as dataframes</p></li>
<li><p>support multiple methods of filling/interpolation</p></li>
<li><p>supports removal of nan from the start/all of the timeseries</p></li>
<li><p>supports action on multiple timeseries</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>df : dataframe/numpy array</p>
<dl class="simple">
<dt>method<span class="classifier">string, list of strings or None, optional</span></dt><dd><p>Either a fill method (bfill, ffill, pad)
Or an interplation method: ‘linear’, ‘time’, ‘index’, ‘values’, ‘nearest’, ‘zero’, ‘slinear’, ‘quadratic’, ‘cubic’, ‘barycentric’, ‘krogh’, ‘spline’, ‘polynomial’, ‘from_derivatives’, ‘piecewise_polynomial’, ‘pchip’, ‘akima’, ‘cubicspline’
Or ‘fnna’: removes all to the first non nan
Or ‘nona’: removes all nans</p>
</dd>
<dt>axis<span class="classifier">int, optional</span></dt><dd><p>axis. The default is 0.</p>
</dd>
<dt>limit<span class="classifier">TYPE, optional</span></dt><dd><p>when filling, how many nan get filled. The default is None (indefinite)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>method ffill or bfill</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">25</span><span class="p">])</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;ffill&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span> <span class="mf">25.</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ffill&#39;</span><span class="p">,</span><span class="s1">&#39;bfill&#39;</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span> <span class="mf">25.</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ffill&#39;</span><span class="p">,</span><span class="s1">&#39;bfill&#39;</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span> <span class="mf">25.</span><span class="p">]))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">25</span><span class="p">])</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;ffill&#39;</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span> <span class="mf">25.</span><span class="p">]))</span>
</pre></div>
</div>
<p>df_fillna does not maintain state of latest ‘prev’ value: use <a href="#id70"><span class="problematic" id="id71">ffill_</span></a> for that.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>interpolation methods</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">25</span><span class="p">])</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;linear&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">5.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span>  <span class="mf">17.</span><span class="p">,</span> <span class="mf">25.</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;quadratic&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">4.</span><span class="p">,</span>  <span class="mf">9.</span><span class="p">,</span>  <span class="mf">16.</span><span class="p">,</span> <span class="mf">25.</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>method = fnna and nona</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="p">[</span><span class="mf">1.</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="s1">&#39;fnna&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span> <span class="o">+</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="s1">&#39;nona&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;nona&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_fillna</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="s1">&#39;fnna&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>array/dataframe with nans removed/filled</p>
</dd></dl>

</section>
<section id="df-index">
<h3>df_index<a class="headerlink" href="#df-index" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.df_index">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">df_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inner'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.df_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines a joint index of multiple timeseries objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>seq<span class="classifier">sequence whose index needs to be determined</span></dt><dd><p>a (possible nested) sequence of timeseries/non-timeseries object within lists/dicts</p>
</dd>
<dt>index<span class="classifier">str, optional</span></dt><dd><p>method to determine the index. The default is ‘inner’.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>pd.Index</dt><dd><p>The joint index.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tss</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="mi">9</span><span class="o">-</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">more_tss_as_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">,[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="mi">9</span><span class="o">-</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">df_index</span><span class="p">(</span><span class="n">tss</span> <span class="o">+</span> <span class="p">[</span><span class="n">more_tss_as_dict</span><span class="p">],</span> <span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">df_index</span><span class="p">(</span><span class="n">more_tss_as_dict</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">14</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="df-reindex">
<h3>df_reindex<a class="headerlink" href="#df-reindex" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.df_reindex">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">df_reindex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.df_reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>A slightly more general version of df.reindex(index)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>ts<span class="classifier">dataframe or numpy array (or list/dict of theses)</span></dt><dd><p>timeseries to be reindexed</p>
</dd>
<dt>index<span class="classifier">str, timeseries, pd.Index.</span></dt><dd><p>The new index</p>
</dd>
<dt>method<span class="classifier">str, list of str, float, optional</span></dt><dd><p>various methods of handling nans are available. The default is None.
See df_fillna for a full list.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>timeseries/np.ndarray (or list/dict of theses)</dt><dd><p>timeseries reindex.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>index = inner/outer</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tss</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="mi">9</span><span class="o">-</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">df_reindex</span><span class="p">(</span><span class="n">tss</span><span class="p">,</span> <span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">df_reindex</span><span class="p">(</span><span class="n">tss</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">14</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>index provided</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tss</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="mi">9</span><span class="o">-</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">df_reindex</span><span class="p">(</span><span class="n">tss</span><span class="p">,</span> <span class="n">tss</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tss</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">df_reindex</span><span class="p">(</span><span class="n">tss</span><span class="p">,</span> <span class="n">tss</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tss</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="presync">
<h3>presync<a class="headerlink" href="#presync" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.presync">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">presync</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.presync" title="Permalink to this definition">¶</a></dt>
<dd><p>Much of timeseries analysis in Pandas is spent aligning multiple timeseries before feeding them into a function.
presync allows easy presynching of all paramters of a function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable, optional</span></dt><dd><p>function to be presynched. The default is None.</p>
</dd>
<dt>index<span class="classifier">str, optional</span></dt><dd><p>index join policy. The default is ‘inner’.</p>
</dd>
<dt>method<span class="classifier">str/int/list of these, optional</span></dt><dd><p>method of nan handling. The default is None.</p>
</dd>
<dt>columns<span class="classifier">str, optional</span></dt><dd><p>columns join policy. The default is ‘inner’.</p>
</dd>
<dt>default<span class="classifier">float, optional</span></dt><dd><p>value when no data is available. The default is np.nan.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>presynch-decorated function</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">addition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>    
</pre></div>
</div>
<p>#We get some nonsensical results:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">addition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">z</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span>  <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>#But:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">presync</span><span class="p">(</span><span class="n">addition</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span><span class="n">z</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">presync</span><span class="p">(</span><span class="n">addition</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;ffill&#39;</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example 2</dt>
<dd class="field-odd"><p>alignment works for parameters ‘buried’ within…</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">a</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">b</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">presync</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;ffill&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">),</span> <span class="n">b</span> <span class="o">=</span> <span class="n">z</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]),</span> <span class="n">index</span> <span class="o">=</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example 3</dt>
<dd class="field-odd"><p>alignment of numpy arrays</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">addition</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">presync</span><span class="p">(</span><span class="n">addition</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>  <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])),</span>  <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]])</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="mi">0</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="mi">1</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span><span class="o">.</span><span class="n">T</span><span class="p">),</span>  <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example 4</dt>
<dd class="field-odd"><p>inner join alignment of columns in dataframes by default</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">12.</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;wrong&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;columns&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;other&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">12.</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">x</span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">]]</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">12.</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;column name for a single column dataframe is ignored&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">presync</span><span class="p">(</span><span class="n">addition</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;other&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">]},</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;other&#39;</span><span class="p">]</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example 4</dt>
<dd class="field-odd"><p>ffilling, bfilling</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
<p>but, we provide easy conversion of internal parameters of presync:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">bfill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">oj</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">oj</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example 5</dt>
<dd class="field-odd"><p>indexing to a specific index</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">dt</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">presync</span><span class="p">(</span><span class="n">addition</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">4.</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="n">index</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example 6</dt>
<dd class="field-odd"><p>returning complicated stuff</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,(</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">)),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">99</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,(</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">)),</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">99</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">,</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">ts_sum</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">presync</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">();</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">old</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="add-sub-mul-div-pow-operators">
<h3>add/sub/mul/div/pow operators<a class="headerlink" href="#add-sub-mul-div-pow-operators" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.add_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">add_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.add_" title="Permalink to this definition">¶</a></dt>
<dd><p>addition of a and b supporting presynching (inner join) of timeseries</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.mul_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">mul_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.mul_" title="Permalink to this definition">¶</a></dt>
<dd><p>multiplication of a and b supporting presynching (inner join) of timeseries</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.div_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">div_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.div_" title="Permalink to this definition">¶</a></dt>
<dd><p>division of a by b supporting presynching (inner join) of timeseries</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.sub_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">sub_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.sub_" title="Permalink to this definition">¶</a></dt>
<dd><p>subtraction of b from a supporting presynching (inner join) of timeseries</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyg.timeseries._index.pow_">
<span class="sig-prename descclassname"><span class="pre">pyg.timeseries._index.</span></span><span class="sig-name descname"><span class="pre">pow_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.timeseries._index.pow_" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to a**b supporting presynching (inner join) of timeseries</p>
</dd></dl>

</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyg</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">pyg.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="mongo.html">pyg.mongo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyg.timeseries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simple-functions">simple functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#diff">diff</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shift">shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratio">ratio</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-count">ts_count</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-sum">ts_sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-mean">ts_mean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-rms">ts_rms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-std">ts_std</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-skew">ts_skew</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-min">ts_min</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-max">ts_max</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ts-median">ts_median</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fnna">fnna</a></li>
<li class="toctree-l3"><a class="reference internal" href="#v2na-na2v">v2na/na2v</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ffill-bfill">ffill/bfill</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nona">nona</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#expanding-window-functions">expanding window functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#expanding-mean">expanding_mean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-rms">expanding_rms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-std">expanding_std</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-sum">expanding_sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-skew">expanding_skew</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-min">expanding_min</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-max">expanding_max</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-median">expanding_median</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expanding-rank">expanding_rank</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cumsum">cumsum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cumprod">cumprod</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rolling-window-functions">rolling window functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rolling-mean">rolling_mean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-rms">rolling_rms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-std">rolling_std</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-sum">rolling_sum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-skew">rolling_skew</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-min">rolling_min</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-max">rolling_max</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-median">rolling_median</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-quantile">rolling_quantile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-rank">rolling_rank</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exponentially-weighted-moving-functions">exponentially weighted moving functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ewma">ewma</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmrms">ewmrms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmstd">ewmstd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmskew">ewmskew</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmvar">ewmvar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmcor">ewmcor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmcorr">ewmcorr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmlr">ewmLR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmglm">ewmGLM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ewmxo">ewmxo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions-exposing-their-state">functions exposing their state</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id65">simple functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id67">expanding window functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id68">rolling window functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id69">exponentially weighted moving functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#index-handling">Index handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#df-fillna">df_fillna</a></li>
<li class="toctree-l3"><a class="reference internal" href="#df-index">df_index</a></li>
<li class="toctree-l3"><a class="reference internal" href="#df-reindex">df_reindex</a></li>
<li class="toctree-l3"><a class="reference internal" href="#presync">presync</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-sub-mul-div-pow-operators">add/sub/mul/div/pow operators</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_dict.html">pyg.base.Dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_dictable.html">pyg.base.dictable</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_mongo.html">pyg.mongo</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_cell.html">pyg.base.cell</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_perdictable.html">pyg.base.join</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_timeseries.html">pyg.timeseries</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_ts_decorators.html">pyg.timeseries decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_ts_ewma_time.html">pyg.timeseries.ewma</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="mongo.html" title="previous chapter">pyg.mongo</a></li>
      <li>Next: <a href="tutorials.html" title="next chapter">Tutorials</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Yoav Git.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/timeseries.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>